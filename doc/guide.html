<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.5" />
<title>CxxTest User Guide</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName == 'DIV'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName == 'DIV' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>CxxTest User Guide</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_abstract">Abstract</h2>
<div class="sectionbody">
<div class="paragraph"><p>CxxTest is a unit testing framework for C++ that is similar in
spirit to <a href="http://junit.org/">JUnit</a>,
<a href="http://cppunit.sourceforge.net">CppUnit</a>, and
<a href="http://xprogramming.com/software.html">xUnit</a>.  CxxTest is easy to
use because it does not require precompiling a CxxTest testing
library, it employs no advanced features of C++ (e.g. RTTI) and it
supports a very flexible form of test discovery.  This documentation
describes CxxTest 4.0, which includes significant enhancements to
the test discovery process, a modern test driver, and new documentation.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">1. Overview</h2>
<div class="sectionbody">
<div class="paragraph"><p>CxxTest is a unit testing framework for C++ that is similar in
spirit to <a href="http://junit.org/">JUnit</a>,
<a href="http://cppunit.sourceforge.net">CppUnit</a>, and
<a href="http://xprogramming.com/software.html">xUnit</a>.
CxxTest is designed to be as portable as possible;  it does not require</p></div>
<div class="ulist"><ul>
<li>
<p>
RTTI
</p>
</li>
<li>
<p>
Member template functions
</p>
</li>
<li>
<p>
Exception handling
</p>
</li>
<li>
<p>
External libraries (including memory management, file/console I/O, graphics libraries)
</p>
</li>
</ul></div>
<div class="paragraph"><p>In particular, the design of CxxTest was tailored for C++ compilers
on embedded systems, for which many of these features are not
supported.  However, CxxTest can also leverage standard C++ features
when they are supported by a compiler (e.g. catch unhandled
exceptions).</p></div>
<div class="paragraph"><p>Additionally, CxxTest supports <em>test discovery</em>.  Tests are defined
in C++ header files, which are parsed by CxxTest to automatically
generate a test runner.  Thus, CxxTest is somewhat easier to use
than alternative C++ testing frameworks, since you do not need to
<em>register</em> tests.</p></div>
<div class="paragraph"><p>The <a href="http://cxxtest.com">CxxTest Home Page</a> is
<a href="http://cxxtest.com">http://cxxtest.com</a>.  This webpage contains links
for <a href="https://sourceforge.net/projects/cxxtest/files/">release downloads</a>,
the <a href="https://groups.google.com/forum/?hl=en#!forum/cxxtest-forum">CxxTest
discussion list</a>, and documentation in
<a href="http://cxxtest.com/cxxtest/doc/guide.html">HTML</a>,
<a href="http://cxxtest.com/cxxtest/doc/guide.pdf">PDF</a>, and
<a href="http://cxxtest.comm/cxxtest/doc/guide.epub">EPUB</a> formats.  The
<a href="http://cxxtest.com">CxxTest Home Page</a> also includes developer
resources (e.g. <a href="https://software.sandia.gov/hudson/view/CxxTest/">automated
test results</a>).  CxxTest is available under the
<a href="http://www.gnu.org/copyleft/lesser.html">GNU Lesser General Public</a>
license.</p></div>
<div class="paragraph"><p>The CxxTest User Guide provides the following documentation:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="#gettingStarted">Getting Started</a>: Some simple examples that illustrate how to use CxxTest
</p>
</li>
<li>
<p>
<a href="#testAssertions">Test Assertions</a>: The test assertions supported by CxxTest
</p>
</li>
<li>
<p>
<a href="#cxxtestgen">The CxxTestGen Command</a>: Documentation for the <tt>cxxtestgen</tt> command
</p>
</li>
<li>
<p>
<a href="#runner">Test Runner Syntax</a>: Discussion of command line options for test runners
</p>
</li>
<li>
<p>
<a href="#advanced">Advanced Testing Features</a>: Advanced features of CxxTest
</p>
</li>
<li>
<p>
<a href="#traits">Value Traits</a>: Customizing data traits for error messages
</p>
</li>
<li>
<p>
<a href="#mock">Testing with Mock Objects</a>: How to test with mock global functions
</p>
</li>
<li>
<p>
<a href="#installation">Installation</a>: How to install CxxTest
</p>
</li>
<li>
<p>
<a href="#discussion">Status and Future Plans</a>: Comments on the past, present and future of CxxTest
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="gettingStarted">2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph"><p>Testing is performed with CxxTest in a four-step process:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Tests are defined in C++ header files
</p>
</li>
<li>
<p>
The <tt>cxxtestgen</tt> command processes header files to generate files for the test runner.
</p>
</li>
<li>
<p>
Compile the test runner.
</p>
</li>
<li>
<p>
Execute the test runner to run all test suites.
</p>
</li>
</ol></div>
<div class="paragraph"><p>CxxTest supports test automation, sharing of setup
and shutdown code for tests, aggregation of tests into collections,
and independence of the tests from the reporting framework.  To
achieve this, CxxTest supports some important concepts that are common to xUnit frameworks (
e.g. <a href="http://junit.org/">JUnit</a>, <a href="http://cppunit.sourceforge.net">CppUnit</a>, and
<a href="http://xprogramming.com/software.html">xUnit</a>):</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
test fixture
</dt>
<dd>
<p>
   A <em>test fixture</em> represents the preparation needed to perform one or more
   tests, and any associate cleanup actions.  This may involve, for example,
   creating temporary or proxy databases, directories, or starting a server
   process.
</p>
</dd>
</dl></div>
<div class="dlist"><dl>
<dt class="hdlist1">
test suite
</dt>
<dd>
<p>
   A <em>test suite</em> is a collection of test cases, which represent
   the smallest unit of testing.  A test suite is defined by a class
   that inherits from the <tt>CxxTest::TestSuite</tt> class, and the tests
   in a test suite are executed together.
</p>
</dd>
<dt class="hdlist1">
test
</dt>
<dd>
<p>
    A test is a public member function of a test suite whose name
    starts with <tt>test</tt>, e.g. <tt>testDirectoryScanner()</tt>,
    <tt>test_cool_feature()</tt> and <tt>TestImportantBugFix()</tt>.
</p>
</dd>
<dt class="hdlist1">
test runner
</dt>
<dd>
<p>
   A <em>test runner</em> is a component which orchestrates the execution
   of tests across one or more test suites and provides the outcome
   to the user.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>When building test fixtures using <tt>TestSuite</tt>, the <tt>TestSuite.setUp</tt>
and <tt>TestSuite.tearDown</tt> methods can be overridden to provide
initialization and cleanup for the fixture.  The <tt>TestSuite.setUp</tt>
method is run before each test is executed, and the <tt>TestSuite.tearDown</tt>
method is run after each test is executed.</p></div>
<div class="sect2">
<h3 id="_a_first_example">2.1. A First Example</h3>
<div class="paragraph"><p>The following is a simple example of a
test suite with a single test, <tt>testAddition</tt>, which perform two test assertions:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite1.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite1</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testAddition</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>You use the <tt>cxxtestgen</tt> script to generate a <em>test runner</em> for test suites in C++ header files:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --error-printer -o runner<span style="color: #990000">.</span>cpp MyTestSuite1<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>This command generates the file <tt>runner.cpp</tt>, which can be compiled.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --error-printer -o runner<span style="color: #990000">.</span>cpp MyTestSuite1<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>Note that additional compiler flags may be needed to include headers
and libraries that are used during testing.</p></div>
<div class="paragraph"><p>This runner can be executed to perform the specified tests:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">.</span>/runner</tt></pre></div></div>
<div class="paragraph"><p>which generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 3 tests..
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 3 tests
Success rate: 66%</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_a_second_example">2.2. A Second Example</h3>
<div class="paragraph"><p>The following header file extends the previous example to
include a test that generates an error:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite2.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite2</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testAddition</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testMultiplication</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_TRACE</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Starting multiplication test"</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span> <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">5</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_TRACE</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Finishing multiplication test"</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>The test runner generated by <tt>cxxtestgen</tt> for this test suite generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 3 tests..
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 3 tests
Success rate: 66%</tt></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_sample_problems">2.3. Sample Problems</h3>
<div class="paragraph"><p>CxxTest comes with example test suites in the <tt>cxxtest/sample</tt> subdirectory of
the distribution.  If you look in that directory, you will see three
Makefiles: <tt>Makefile.unix</tt>, <tt>Makefile.msvc</tt> and
<tt>Makefile.bcc32</tt> which are for Linux/Unix, MS Visual C++ and Borland C++, repectively.  These files are provided as a starting point,
and some options may need to be tweaked in them for your system.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testAssertions">3. Test Assertions</h2>
<div class="sectionbody">
<div class="paragraph"><p>The following table summarizes the test assertions supported by CxxTest.
<a href="#appendix_A">Appendix A</a> provides examples that illustrate the use of these test assertions.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top"> Macro                                                                 </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert"><tt>TS_ASSERT(expr)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify <tt>expr</tt> is true</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_delta"><tt>TS_ASSERT_DELTA(x,y,d)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>abs(x-y) &lt; d</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_differs"><tt>TS_ASSERT_DIFFERS(x,y)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>x != y</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_equals"><tt>TS_ASSERT_EQUALS(x,y)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>x == y</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_less_than"><tt>TS_ASSERT_LESS_THAN(x,y)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>x &lt; y</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_less_than_equals"><tt>TS_ASSERT_LESS_THAN_EQUALS(x,y)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>x &#8656; y</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_predicate"><tt>TS_ASSERT_PREDICATE(P,x)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify <tt>P(x)</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_relation"><tt>TS_ASSERT_RELATION(x,R,y)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify <tt>x R y</tt></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_same_data"><tt>TS_ASSERT_SAME_DATA(x,y,size)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify two buffers are equal</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_throws"><tt>TS_ASSERT_THROWS(expr,type)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>expr</tt> throws the specified exception type</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_throws_anything"><tt>TS_ASSERT_THROWS_ANYTHING(expr)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>expr</tt> throws an exception</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_throws_assert"><tt>TS_ASSERT_THROWS_ASSERT(expr,arg,assertion)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify type and value of what <tt>expr</tt> throws</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_throws_equals"><tt>TS_ASSERT_THROWS_EQUALS(expr,arg,x,y)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify type and value of what <tt>expr</tt> throws</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_assert_throws_nothing"><tt>TS_ASSERT_THROWS_NOTHING(expr)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Verify that <tt>expr</tt> doesn&#8217;t throw anything</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_fail"><tt>TS_FAIL(message)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Fail unconditionally</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_trace"><tt>TS_TRACE(message)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Print <tt>message</tt> as an informational message</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><a href="#ts_warn"><tt>TS_WARN(message)</tt></a></p></td>
<td align="left" valign="top"><p class="table">Print <tt>message</tt> as a warning</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>The test assertions supported by CxxTest are defined as macros,
which eliminates the need for certain templates within CxxTest and
allows tests to catch exceptions.  There are four categories of
test assertions in CxxTest, which are distinguished by their prefixes:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
TS_
</dt>
<dd>
<p>
These test assertions perform a test. Catch exceptions generated
during testing will cause the test to fail, except for tests that
check for exceptions.
</p>
</dd>
<dt class="hdlist1">
TSM_
</dt>
<dd>
<p>
These test assertions perform the same tests as the corresponding
<tt>TS</tt> assertions, but their first argument is a <tt>const char*</tt> message
buffer that is printed when the test fails.
</p>
</dd>
<dt class="hdlist1">
ETS_
</dt>
<dd>
<p>
These test assertions perform the same tests as the corresponding
<tt>TS</tt> assertions.  However, these test assertions do not catch
exceptions generated during testing.
</p>
</dd>
<dt class="hdlist1">
ETSM_
</dt>
<dd>
<p>
These test assertions perform the same tests as the
corresponding <tt>TS</tt> assertions, but (1) their first argument is a
<tt>const char*</tt> message buffer is printed when the test fails, and
(2) these assertions do not catch exceptions generated during
testing.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="cxxtestgen">4. The CxxTestGen Command</h2>
<div class="sectionbody">
<div class="paragraph"><p>The <tt>cxxtestgen</tt> command processes one or more C++ header files to
generate a test runner.  The <tt>cxxtestgen</tt> command performs test
discovery by parsing the header files to find test classes, which
inherit from the class <tt>CxxTest::TestSuite</tt>.</p></div>
<div class="paragraph"><p>The <tt>--help</tt> option generates the following summary of the <tt>cxxtestgen</tt> command line options:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Usage: cxxtestgen [options] [&lt;filename&gt; ...]

Options:
  -h, --help            show this help message and exit
  --version             Write the CxxTest version.
  -o NAME, --output=NAME
                        Write output to file NAME.
  -w WORLD, --world=WORLD
                        The label of the tests, used to name the XML results.
  --include=HEADER      Include file HEADER in the test runner before other
                        headers.
  --abort-on-fail       Abort tests on failed asserts (like xUnit).
  --main=MAIN           Specify an alternative name for the main() function.
  --headers=HEADER_FILENAME
                        Specify a filename that contains a list of header
                        files that are processed to generate a test runner.
  --runner=CLASS        Create a test runner that processes test events using
                        the class CxxTest::CLASS.
  --gui=CLASS           Create a GUI test runner that processes test events
                        using the class CxxTest::CLASS. (deprecated)
  --error-printer       Create a test runner using the ErrorPrinter class, and
                        allow the use of the standard library.
  --xunit-printer       Create a test runner using the XUnitPrinter class.
  --xunit-file=XUNIT_FILE
                        The file to which the XML summary is written for test
                        runners using the XUnitPrinter class.  The default XML
                        filename is TEST-&lt;world&gt;.xml, where &lt;world&gt; is the
                        value of the --world option.  (default: cxxtest)
  --have-std            Use the standard library (even if not found in tests).
  --no-std              Do not use standard library (even if found in tests).
  --have-eh             Use exception handling (even if not found in tests).
  --no-eh               Do not use exception handling (even if found in
                        tests).
  --longlong=TYPE       Use TYPE as for long long integers.  (default: not
                        supported)
  --no-static-init      Do not rely on static initialization in the test
                        runner.
  --template=TEMPLATE   Generate the test runner using file TEMPLATE to define
                        a template.
  --root                Write the main() function and global data for a test
                        runner.
  --part                Write the tester classes for a test runner.
  -f, --fog-parser      Use new FOG C++ parser</tt></pre>
</div></div>
<div class="paragraph"><p>The following section describe illustrate the use of these command line options.</p></div>
<div class="sect2">
<h3 id="_general_options">4.1. General Options</h3>
<div class="paragraph"><p>The default behavior of <tt>cxxtestgen</tt> is to send the source for the
test runner to the standard output stream.  The <tt>--output</tt> (<tt>-o</tt>)
option indicates a filename for the test runner.</p></div>
<div class="paragraph"><p>The <tt>--world</tt> (<tt>-w</tt>) option specifies the value of the <tt>CxxTest::RealWorldDescription::_worldName</tt>
variable.  This option also customizes the filename used for XML output files (see below).</p></div>
<div class="paragraph"><p>The <tt>--include</tt> option defines a filename that is included in the runner before all other headers.</p></div>
<div class="paragraph"><p>The <tt>--abort-on-fail</tt> option forces an abort if a test fails, rather than continuing execution
to the next test.</p></div>
<div class="paragraph"><p>The <tt>--main</tt> option specifies an alternate name for the <tt>main()</tt> function.</p></div>
</div>
<div class="sect2">
<h3 id="_test_listener_options">4.2. Test Listener Options</h3>
<div class="paragraph"><p>The test runner behavior is controlled by a <em>test listener</em> class
that is used to define to the <tt>main</tt> function.  The test listener
class is a subclass of <tt>TestListener</tt> that receives notifications
about the testing process, notably which assertions failed.  The
<tt>--runner</tt> option is used to specify the test listener that is used
in the test runner.  The following test listeners are defined in
CxxTest:</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<tt>ErrorPrinter</tt>
</dt>
<dd>
<p>
    This is the standard error printer, which formats its output to the standard output stream (<tt>std::cout</tt>).
</p>
</dd>
<dt class="hdlist1">
<tt>StdioPrinter</tt>
</dt>
<dd>
<p>
    The same as <tt>ErrorPrinter</tt> except that it uses <tt>printf</tt> instead of <tt>std::cout</tt>.
</p>
</dd>
<dt class="hdlist1">
<tt>ParenPrinter</tt>
</dt>
<dd>
<p>
    Identical to <tt>ErrorPrinter</tt> except that it prints line numbers in parantheses. This is the way Visual Studio expects it.
</p>
</dd>
<dt class="hdlist1">
<tt>XmlPrinter</tt>
</dt>
<dd>
<p>
    Print test results to an XML file.
</p>
</dd>
<dt class="hdlist1">
<tt>XUnitPrinter</tt>
</dt>
<dd>
<p>
    This test listener generates output using both <tt>ErrorPrinter</tt> and <tt>XmlPrinter</tt>.
</p>
</dd>
</dl></div>
<div class="sect3">
<h4 id="_errorprinter">4.2.1. ErrorPrinter</h4>
<div class="paragraph"><p>The <tt>--error-printer</tt> option creates a runner using the <tt>ErrorPrinter</tt>
test listener, and it indicates that the standard library is used
in the test runner.  The <tt>ErrorPrinter</tt> test listener prints dots
to summarize test execution, along with a summary of the test
results.  For example, the command</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --error-printer -o runner<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 3 tests..
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 3 tests
Success rate: 66%</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_stdioprinter">4.2.2. StdioPrinter</h4>
<div class="paragraph"><p>If your compiler does not support <tt>std::cout</tt>, then the <tt>ErrorPrinter</tt> test listener cannot be used.
In this case, the <tt>StdioPrinter</tt> test listener can be used;  it provides the same output as <tt>ErrorPrinter</tt> but it uses the <tt>printf</tt> function. For example, the command line:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --runner<span style="color: #990000">=</span>StdioPrinter -o runner<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 2 tests.
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_parenprinter">4.2.3. ParenPrinter</h4>
<div class="paragraph"><p>The <tt>--runner=ParenPrinter</tt> option creates a similar test runner:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --runner<span style="color: #990000">=</span>ParenPrinter -o runner<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>This test runner generates output that is similar to the <tt>ErrorPrinter</tt> test listener:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 2 tests.
In MyTestSuite2::testMultiplication:
MyTestSuite2.h(16): Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</tt></pre>
</div></div>
<div class="paragraph"><p>The only difference is the parentheses used in the output.  This test listener provides a format that can be recognized by Visual Studio.</p></div>
</div>
<div class="sect3">
<h4 id="_xmlprinter">4.2.4. XmlPrinter</h4>
<div class="paragraph"><p>The <tt>--runner=XmlPrinter</tt> option creates a test runner whose output is an XML summary of the test results.  For example, the command:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --runner<span style="color: #990000">=</span>XmlPrinter -o runner<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;testsuite name="cxxtest"  tests="2" errors="0" failures="1" time="0" &gt;
    &lt;testcase classname="MyTestSuite2" name="testAddition" line="7" /&gt;
    &lt;testcase classname="MyTestSuite2" name="testMultiplication" line="13"&gt;
        &lt;failure file="MyTestSuite2.h" line="16" type="failedAssertEquals" &gt;Error: Expected (2 * 2 == 5), found (4 != 5)&lt;/failure&gt;
    &lt;/testcase&gt;
&lt;/testsuite&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>This XML format is conforms to the XML standard used by other xUnit tools.  Thus, this output can be used as input in other tools, like <a href="http://jenkins-ci.org/">Jenkins</a>, to generate test summaries.</p></div>
</div>
<div class="sect3">
<h4 id="_xunitprinter">4.2.5. XUnitPrinter</h4>
<div class="paragraph"><p>The <tt>XUnitPrinter</tt> test listener generates output using both the
ErrorPrinter+ and <tt>XmlPrinter</tt> test listeners.  This allows the
user to interactively view a simple test summary, while simultaneously
generating an XML summary of the test results.  The <tt>--xunit-printer</tt>
option specifies the use of <tt>XUnitPrinter</tt>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --xunit-printer -o runner<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>This test runner generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 2 tests.
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</tt></pre>
</div></div>
<div class="paragraph"><p>The default filename for the XML results is <tt>TEST-cxxtest.xml</tt>.  The <tt>--xunit-file</tt> option can be used to specify an alternative filename.  Additionally, the value of the <tt>--world</tt> option can be used to specify the filename <tt>TEST-&lt;world&gt;.xml</tt>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_language_options">4.3. Language Options</h3>
<div class="paragraph"><p>When <tt>cxxtestgen</tt> performs test discovery, it also performs checks
to detect whether (1) the standard library is used and (2) exceptions
are used.  These checks configure CxxTest to <em>not</em> assume that these
C++ language features are used when generating the test driver.
Thus, CxxTest can naturally be used with compilers that do not
support these features.</p></div>
<div class="paragraph"><p>The <tt>cxxtestgen</tt> command includes several options that override
these checks and define features of C++ that are used by the test
runner.  The <tt>--have-std</tt> option indicates that the test runner
should use the standard library, and the <tt>--no-std</tt> option indicates
that the test runner should not use the standard library. The
--have-eh+ options indicates that the test runner should use
exception handling, and the <tt>--no-eh</tt> indicates that the test runner
should not not use exception handling.</p></div>
<div class="paragraph"><p>The <tt>--longlong</tt> option specifies the type used for long long
integers.  The default is for <em>no</em> long long integer type to be specified,
which is consistent with the current C++ standard.</p></div>
<div class="paragraph"><p>CxxTest test runners depend quite heavily on static initialization
of objects that are used to define and execute tests. The
--no-static-init+ option can be used to avoid static initialization
for compilers or linkers that have trouble compiling the default test runner.</p></div>
</div>
<div class="sect2">
<h3 id="_creating_test_runners_from_parts">4.4. Creating Test Runners from Parts</h3>
<div class="paragraph"><p>The default behavior of <tt>cxxtestgen</tt> is to generate a test runner
that directly integrates classes that define the tests along with
a <tt>main()</tt> function that executes all test suites.  It is often useful to
allow test suites to be processes separately and then linked together.  The <tt>--root</tt> and <tt>--part</tt> options
support this logic.  For example, suppose that we wish to define a test runner for tests in the headers
MyTestSuite1.h+ and <tt>MyTestSuite2.h</tt>.  We execute <tt>cxxtestgen</tt> with the <tt>--part</tt> option to generate source files for each of the test suites:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --part --error-printer -o MyTestSuite1<span style="color: #990000">.</span>cpp MyTestSuite1<span style="color: #990000">.</span>h
cxxtestgen --part --error-printer -o MyTestSuite2<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>Similarly, we execute <tt>cxxtestgen</tt> with the <tt>--root</tt> opiton to generate the <tt>main()</tt> routine:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --root --error-printer -o runner<span style="color: #990000">.</span>cpp</tt></pre></div></div>
<div class="paragraph"><p>Finally, the test runner is built by compiling all of these source files together:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>g<span style="color: #990000">++</span> -o runner -I<span style="color: #009900">$CXXTEST</span> runner<span style="color: #990000">.</span>cpp MyTestSuite1<span style="color: #990000">.</span>cpp MyTestSuite2<span style="color: #990000">.</span>cpp</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_template_files">4.5. Template Files</h3>
<div class="paragraph"><p>CxxTest supports the use of <em>template files</em> to provide a custom
main()+ function.  This may be useful when using a custom test
listener, or when using an existing CxxTest test listener in a
nonstandard manner.  A template file is an ordinary source files
with the embedded declaration <tt>&lt;CxxTest world&gt;</tt>, which tells
cxxtestgen+ to insert the world definition at that point.</p></div>
<div class="paragraph"><p>The <tt>--template</tt> option is used to specify the use of a template file:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen -o runner<span style="color: #990000">.</span>cpp --template runner10<span style="color: #990000">.</span>tpl MyTestSuite2<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>For example, consider the following template file:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">#define</span></span> CXXTEST_HAVE_EH
<span style="font-weight: bold"><span style="color: #000080">#define</span></span> CXXTEST_ABORT_TEST_ON_FAIL
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/ErrorPrinter.h&gt;</span>

<span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">()</span>
<span style="color: #FF0000">{</span>
    std<span style="color: #990000">::</span>cout <span style="color: #990000">&lt;&lt;</span> <span style="color: #FF0000">"Starting test runner"</span> <span style="color: #990000">&lt;&lt;</span> std<span style="color: #990000">::</span>endl<span style="color: #990000">;</span>
    <span style="color: #009900">int</span> status <span style="color: #990000">=</span> CxxTest<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">ErrorPrinter</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
    std<span style="color: #990000">::</span>cout <span style="color: #990000">&lt;&lt;</span> <span style="color: #FF0000">"Stopping test runner"</span> <span style="color: #990000">&lt;&lt;</span> std<span style="color: #990000">::</span>endl<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> status<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// The CxxTest "world"</span></span>
<span style="color: #990000">&lt;</span><span style="color: #008080">CxxTest</span> world<span style="color: #990000">&gt;</span></tt></pre></div></div>
<div class="paragraph"><p>This file specifies macros that customize the test runner, and output is generated before and after the tests are run.</p></div>
<div class="paragraph"><p>Note that CxxTest needs to insert certain definitions and <tt>#include</tt>
directives in the runner file. It normally does that before the
first <tt>#include &lt;cxxtest/*.h&gt;</tt> found in the template file. If this
behavior is not what you need, use the directive <tt>&lt;CxxTest preamble&gt;</tt>
to specify where this preamble is inserted.</p></div>
</div>
<div class="sect2">
<h3 id="_test_discovery_options">4.6. Test Discovery Options</h3>
<div class="paragraph"><p>The <tt>cxxtestgen</tt> command performs test discovery by searching C++
header files for CxxTest test classes.  The default process for
test discovery is a simple process that analyzes each line in a
header file sequentially, looking for a sequence of lines that
represent class definitions and test method definitions.</p></div>
<div class="paragraph"><p>There are many limitations to this simple process for test discovery,
and in CxxTest 4.0 a new test discovery mechanism was added based
on the a parser for the
<a href="http://www.computing.surrey.ac.uk/research/dsrg/fog/">Flexible Object
Generator (FOG)</a> language, which is a superset of C+<tt>.  The grammar
for the FOG language was adapted to parse C</tt>+ header files to
identify class definitions and class inheritance relationships,
class and namespace nesting of declarations, and class methods.
This allows <tt>cxxtestgen</tt> to identify test classes that are defined
with complex inheritance relationships.</p></div>
<div class="paragraph"><p>The <tt>--fog</tt> option is used to specify the use of the FOG parser for
test discovery.  Although the FOG parser is more powerful, the
simpler <tt>cxxtestgen</tt> test discover process is the default because
the FOG parser is slower execute.  Additionally, the FOG parser
requires the installation of <tt>ply</tt> and, for Python version 2.6,
ordereddict+.  If these packages are not available, then the <tt>--fog</tt>
option is automatically disabled.</p></div>
<div class="paragraph"><p>The following sections illustrate differences between these two test discovery mechanisms, along with
general limitations of the test discovery process.</p></div>
<div class="sect3">
<h4 id="_unexpected_test_suite_format">4.6.1. Unexpected Test Suite Format</h4>
<div class="paragraph"><p>The default test discovery mechanism does a very simple analysis
of the input files, which can easily fail when test classes are not
formated in a standard manner.  For example, consider the following
test suite:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite4.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite4</span>
    <span style="color: #990000">:</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testAddition</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>This test suite is not recognized by the default test discovery
mechanism, but the FOG parser correctly parsers this file and
recognizes the test suite.  A variety of similar discovery failures
arise due to the simple process used by the test discovery mechanism.</p></div>
</div>
<div class="sect3">
<h4 id="_commenting_out_tests">4.6.2. Commenting Out Tests</h4>
<div class="paragraph"><p>Adding and disabling tests are two common steps in test development.
The process of test discovery makes adding tests very easy.  However,
disabling tests is somewhat more complicated.  Consider the following
header file, which defines four tests (three of which are disabled):</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite3.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite3</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testAddition</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">//   void testMultiplication( void )</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//   {</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//      TS_ASSERT( 1 * 1 &lt; 2 );</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//      TS_ASSERT_EQUALS( 1 * 1, 2 );</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//   }</span></span>

<span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     void testSubtraction( void )</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     {</span></span>
<span style="font-style: italic"><span style="color: #9A1900">        TS_ASSERT( 1 - 1 &lt; 1 );</span></span>
<span style="font-style: italic"><span style="color: #9A1900">        TS_ASSERT_EQUALS( 1 - 1, 0 );</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     }</span></span>
<span style="font-style: italic"><span style="color: #9A1900">*/</span></span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">XtestDivision</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">/</span> <span style="color: #993399">1</span> <span style="color: #990000">&lt;</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">/</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>The first is commented out with C++-style comments, the second
test is commented out with C-style comments, and the third test is
named in a manner that is not recognized through test discovery
(i.e., it does not start with <tt>test</tt>).</p></div>
<div class="paragraph"><p>The default test discovery mechanism only works with the first and
third methods for disabling tests, but the FOG parser works with
all three.  The FOG parser performs a complex, multi-line parse of
the source file, so it can identify multi-line C-style comments.</p></div>
<div class="paragraph"><p>Note, however, that the use of C macros will not work:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// BadTestSuite1.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">BadTestSuite1</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testAddition</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000080">#if</span></span> <span style="color: #993399">0</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testSubtraction</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">-</span> <span style="color: #993399">1</span> <span style="color: #990000">&lt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>The <tt>cxxtestgen</tt> discovery mechanisms do not perform a C preprocessing
step, since that would generally require using externally defined
preprocessing variable definitions.   Additionally, preprocessor macros that act like functions will
cause the FOG parser to fail unless they are followed by a semicolon.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="runner">5. Test Runner Syntax</h2>
<div class="sectionbody">
<div class="paragraph"><p>The default behavior of the CxxTest test runner is to execute all
tests in all of the test suites that are linked into the runner.
However, CxxTest test runners process command line options that
allow individual tests and test suites to be selected.</p></div>
<div class="paragraph"><p>For example, consider a test runner defined as follows:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen -f --error-printer -o runner<span style="color: #990000">.</span>cpp MyTestSuite1<span style="color: #990000">.</span>h MyTestSuite2<span style="color: #990000">.</span>h MyTestSuite4<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>The <tt>--help</tt> (<tt>-h</tt>) option can be used to print the command line options for a test runner.  The command</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>./runner --help</tt></pre>
</div></div>
<div class="paragraph"><p>generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>./runner &lt;suitename&gt;
./runner &lt;suitename&gt; &lt;testname&gt;
./runner -h
./runner --help
./runner --help-tests
./runner -v             Enable tracing output.</tt></pre>
</div></div>
<div class="paragraph"><p>The <tt>--help-tests</tt> option is used to list all test suites that are defined in a test runner.  The command</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">.</span>/runner --help-tests</tt></pre></div></div>
<div class="paragraph"><p>generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Suite/Test Names
---------------------------------------------------------------------------
MyTestSuite1 testAddition
MyTestSuite2 testAddition
MyTestSuite2 testMultiplication
MyTestSuite4 testAddition</tt></pre>
</div></div>
<div class="paragraph"><p>The first column is the test suite name, and the second column is the test name.</p></div>
<div class="paragraph"><p>All tests in a test suite can be executed by simply specifying the test suite name.  For example</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">.</span>/runner MyTestSuite2</tt></pre></div></div>
<div class="paragraph"><p>executes the tests in test suite <tt>MyTestSuite2</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 2 tests.
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 2 tests
Success rate: 50%</tt></pre>
</div></div>
<div class="paragraph"><p>Similarly, a single test can be executed by specifying the test suite followed by the test name.  For example</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">.</span>/runner MyTestSuite2 testMultiplication</tt></pre></div></div>
<div class="paragraph"><p>executes the <tt>testMultiplication</tt> test in test suite <tt>MyTestSuite2</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 1 test
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
Failed 1 of 1 test
Success rate: 0%</tt></pre>
</div></div>
<div class="paragraph"><p>The <tt>-v</tt> option enables the printing of trace information generated
by the <tt>TS_TRACE</tt> function.  For example, the <tt>testMultiplication</tt> test contains trace declarations
before and after the multiplication test.  Thus, the command</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">.</span>/runner -v MyTestSuite2 testMultiplication</tt></pre></div></div>
<div class="paragraph"><p>generates this trace output before and after the test:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 1 test
In MyTestSuite2::testMultiplication:
MyTestSuite2.h:15: Trace: Starting multiplication test
MyTestSuite2.h:16: Error: Expected (2 * 2 == 5), found (4 != 5)
MyTestSuite2.h:17: Trace: Finishing multiplication test
Failed 1 of 1 test
Success rate: 0%</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="advanced">6. Advanced Testing Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_preprocessor_macros">6.1. Preprocessor Macros</h3>
<div class="paragraph"><p>CxxTest recognizes a variety of preprocessor macros that can be used to modify the behavior of a test runner.  Many of these mimic the options of the <tt>cxxtestgen</tt> command.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top"> Preprocessor Macro  </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_HAVE_STD</tt></p></td>
<td align="left" valign="top"><p class="table">Use the standard library.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_HAVE_EH</tt></p></td>
<td align="left" valign="top"><p class="table">Use exception handling.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_ABORT_TEST_ON_FAIL</tt></p></td>
<td align="left" valign="top"><p class="table">Abort tests on failed asserts.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_USER_VALUE_TRAITS</tt></p></td>
<td align="left" valign="top"><p class="table">Enable user-defined value traits.  The default traits dump up to 8 bytes of the data as hex values.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_OLD_TEMPLATE_SYNTAX</tt></p></td>
<td align="left" valign="top"><p class="table">Use old template syntax that is used by some compilers (e.g. Borland C++ 5).</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_OLD_STD</tt></p></td>
<td align="left" valign="top"><p class="table">Use old syntax for libraries where <tt>std::</tt> is not recognized.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_MAX_DUMP_SIZE</tt></p></td>
<td align="left" valign="top"><p class="table">The value of this macro defines the maximum number of bytes to dump if <tt>TS_ASSERT_SAME_DATA()</tt> fails. The default is 0, which indicates no limit.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_DEFAULT_ABORT</tt></p></td>
<td align="left" valign="top"><p class="table">The value of this macro is the default value of the dynamic <em>abort on fail</em> flag.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>CXXTEST_LONGLONG</tt></p></td>
<td align="left" valign="top"><p class="table">The value of this macro is used to define long long integers.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>These preprocessor macros must be defined before the CxxTest header
files are included in the test runner.  For example, the following
template file defines <tt>CXXTEST_HAVE_EH</tt> and <tt>CXXTEST_ABORT_TEST_ON_FAIL</tt>
before other headers are included:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">#define</span></span> CXXTEST_HAVE_EH
<span style="font-weight: bold"><span style="color: #000080">#define</span></span> CXXTEST_ABORT_TEST_ON_FAIL
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/ErrorPrinter.h&gt;</span>

<span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">main</span></span><span style="color: #990000">()</span>
<span style="color: #FF0000">{</span>
    std<span style="color: #990000">::</span>cout <span style="color: #990000">&lt;&lt;</span> <span style="color: #FF0000">"Starting test runner"</span> <span style="color: #990000">&lt;&lt;</span> std<span style="color: #990000">::</span>endl<span style="color: #990000">;</span>
    <span style="color: #009900">int</span> status <span style="color: #990000">=</span> CxxTest<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">ErrorPrinter</span></span><span style="color: #990000">().</span><span style="font-weight: bold"><span style="color: #000000">run</span></span><span style="color: #990000">();</span>
    std<span style="color: #990000">::</span>cout <span style="color: #990000">&lt;&lt;</span> <span style="color: #FF0000">"Stopping test runner"</span> <span style="color: #990000">&lt;&lt;</span> std<span style="color: #990000">::</span>endl<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> status<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// The CxxTest "world"</span></span>
<span style="color: #990000">&lt;</span><span style="color: #008080">CxxTest</span> world<span style="color: #990000">&gt;</span></tt></pre></div></div>
<div class="paragraph"><p>Several of these macros concern whether modern C++ conventions are
supported by the compiler.  If tests need to be ported to multiple
compilers, then one important convention is whether the namespace
<tt>std::</tt> is supported.  For example, switching between <tt>cout</tt> and
<tt>std::cout</tt> typically needs to be done throughout a code.  CxxTest
supports this with the <tt>CXXTEST_STD()</tt> macro.  For example,
<tt>CXXTEST_STD(cout)</tt> can be used within a test suite, and CxxTest
handles the mapping of this to <tt>cout</tt> or <tt>std::cout</tt> depending on
options provided to <tt>cxxtestgen</tt>.</p></div>
</div>
<div class="sect2">
<h3 id="_customizing_test_fixtures">6.2. Customizing Test Fixtures</h3>
<div class="sect3">
<h4 id="_setup_and_teardown">6.2.1. Setup and Teardown</h4>
<div class="paragraph"><p>CxxTest test fixtures can be customized in several ways to manage
the environment for test suites and individual tests.  A common
feature of test suites is that they share a common logic for setting
up data used in the tests.  Thus, there may be duplicate code for
creating objects, files, inputs, etc.  Similarly, the tests may
share common logic for cleaning up after the test is finished (e.g. deleting temporary objects).</p></div>
<div class="paragraph"><p>You can put this shared code in a common place by overriding the
virtual functions <tt>TestSuite::setUp()</tt> and <tt>TestSuite::tearDown()</tt>.
The <tt>setUp()</tt> function is called before each test, and <tt>tearDown()</tt>
is called after each test.</p></div>
<div class="paragraph"><p>For example, the following test suite employs <tt>setUp()</tt> and <tt>tearDown()</tt> methods to
allocate and deallocate memory for a string buffer:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite5.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;string.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite5</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
    <span style="color: #009900">char</span> <span style="color: #990000">*</span>_buffer<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">setUp</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        _buffer <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="color: #009900">char</span><span style="color: #990000">[</span><span style="color: #993399">1024</span><span style="color: #990000">];</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">tearDown</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">delete</span></span> <span style="color: #990000">[]</span> _buffer<span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_strcpy</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">strcpy</span></span><span style="color: #990000">(</span>_buffer<span style="color: #990000">,</span> <span style="color: #FF0000">"Hello, world!"</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>_buffer<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">],</span> <span style="color: #FF0000">'H'</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>_buffer<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">],</span> <span style="color: #FF0000">'e'</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_memcpy</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">memcpy</span></span><span style="color: #990000">(</span>_buffer<span style="color: #990000">,</span> <span style="color: #FF0000">"Hello, world!"</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span><span style="color: #009900">char</span><span style="color: #990000">));</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>_buffer<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">],</span> <span style="color: #FF0000">'H'</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>_buffer<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">],</span> <span style="color: #FF0000">'e'</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
</tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_dynamically_created_test_suites">6.2.2. Dynamically Created Test Suites</h4>
<div class="paragraph"><p>CxxTest test fixtures can also be customized during the construction
and deconstruction of test suites.  By default, CxxTest test suites
are instantiated statically in the test runner.  However, dynamically
created test suites can be used to perform suite-level setup and
teardown operations, verify the environment needed to execute a
test suite, and construct test suites that require a nontrivial
constructor.</p></div>
<div class="paragraph"><p>CxxTest instantiates a test suite dynamically if the <tt>createSuite()</tt>
or <tt>destroySuite()</tt> methods are defined.  For example, the following
test suite checks to see if it is being compiled with Microsoft
Visual Studio.  If not, the <tt>createSuite()</tt> returns a null pointer,
indicating that the test suite was not created.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite6.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite6</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>

    <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> MyTestSuite6<span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">createSuite</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #000080">    #ifdef</span></span> _MSC_VER
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">MyTestSuite6</span></span><span style="color: #990000">();</span>
<span style="font-weight: bold"><span style="color: #000080">    #else</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">    #endif</span></span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">destroySuite</span></span><span style="color: #990000">(</span> MyTestSuite6<span style="color: #990000">*</span> suite <span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">delete</span></span> suite<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_nothing</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> <span style="color: #FF0000">"Nothing to test"</span> <span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_global_and_world_fixtures">6.2.3. Global and World Fixtures</h4>
<div class="paragraph"><p>CxxTest supports two related mechanisms for performing <em>global</em>
setup and teardown operations.  <em>Global fixtures</em> are classes that
inherit from <tt>CxxTest::GlobalFixture</tt>, and they define <tt>setUp</tt> and
<tt>tearDown</tt> methods.  The <tt>setUp</tt> method for all global fixtures is
called before each test is executed, and the <tt>tearDown</tt> method for
all global fixtures is called after each test is completed.  Thus,
this mechanism provides a convenient way of defining setup and
teardown operations that apply to all test suites.</p></div>
<div class="paragraph"><p>For example, consider the following test suite:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite8.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cstdio&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/GlobalFixture.h&gt;</span>

<span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// Fixture1 counts its setUp()s and tearDown()s</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Fixture1</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>GlobalFixture
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">unsigned</span> setUpCount<span style="color: #990000">;</span>
    <span style="color: #009900">unsigned</span> tearDownCount<span style="color: #990000">;</span>

    <span style="font-weight: bold"><span style="color: #000000">Fixture1</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> setUpCount <span style="color: #990000">=</span> tearDownCount <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>

    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">setUp</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #990000">++</span> setUpCount<span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">tearDown</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="color: #990000">++</span> tearDownCount<span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>

    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">setUpWorld</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #000000">printf</span></span><span style="color: #990000">(</span> <span style="color: #FF0000">"Starting a test suite</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span> <span style="color: #990000">);</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span><span style="color: #FF0000">}</span>
    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">tearDownWorld</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #000000">printf</span></span><span style="color: #990000">(</span> <span style="color: #FF0000">"Finishing a test suite</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span> <span style="color: #990000">);</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span><span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">Fixture1</span> fixture1<span style="color: #990000">;</span>


<span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// Fixture2 counts its setUp()s and tearDown()s and makes sure</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// its setUp() is called after Fixture1 and its tearDown() before.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Fixture2</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Fixture1
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">setUp</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>setUpCount<span style="color: #990000">,</span> fixture1<span style="color: #990000">.</span>setUpCount <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>tearDownCount<span style="color: #990000">,</span> fixture1<span style="color: #990000">.</span>tearDownCount<span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> Fixture1<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">setUp</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">tearDown</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>setUpCount<span style="color: #990000">,</span> fixture1<span style="color: #990000">.</span>setUpCount<span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>tearDownCount<span style="color: #990000">,</span> fixture1<span style="color: #990000">.</span>tearDownCount<span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> Fixture1<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">tearDown</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="color: #008080">Fixture2</span> fixture2<span style="color: #990000">;</span>


<span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// Verify the counts for the global fixtures</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite8</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testCountsFirstTime</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture1<span style="color: #990000">.</span>setUpCount<span style="color: #990000">,</span>    <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture1<span style="color: #990000">.</span>tearDownCount<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture2<span style="color: #990000">.</span>setUpCount<span style="color: #990000">,</span>    <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture2<span style="color: #990000">.</span>tearDownCount<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testCountsSecondTime</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture1<span style="color: #990000">.</span>setUpCount<span style="color: #990000">,</span>    <span style="color: #993399">2</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture1<span style="color: #990000">.</span>tearDownCount<span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture2<span style="color: #990000">.</span>setUpCount<span style="color: #990000">,</span>    <span style="color: #993399">2</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>fixture2<span style="color: #990000">.</span>tearDownCount<span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>This test suite defines a runner that generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 2 testsStarting a test suite
Starting a test suite
..Finishing a test suite
Finishing a test suite
OK!</tt></pre>
</div></div>
<div class="paragraph"><p>Note that the global fixtures are instantiated with static global
values.  This ensures that these fixtures are created before the
runner is initialized.  Also, note that the <tt>setUp</tt> methods are
called in the same sequence that the global fixtures are instantiated,
and the <tt>tearDown</tt> methods are called in the reverse sequence.
Finally, note that the <tt>setUp</tt> and <tt>tearDown</tt> methods in global
fixtures return a boolean value, which indicates success or failure
of that operation.</p></div>
<div class="paragraph"><p>This example also illustrates the use of <em>world fixtures</em>, which
perform setup and teardown operations that are executed once each
when beginning and finishing tests in each test suite.  World
fixtures are defined with the <tt>setUpWorld</tt> and <tt>tearDownWorld</tt>
methods in a global fixture.</p></div>
</div>
<div class="sect3">
<h4 id="_runtime_test_customization">6.2.4. Runtime Test Customization</h4>
<div class="paragraph"><p>CxxTest defines several functions that can be called in a test suite to modify the default behavior of CxxTest.</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top"> Test Suite Method </th>
<th align="left" valign="top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><tt>setAbortTestOnFail(bool)</tt></p></td>
<td align="left" valign="top"><p class="table">This function specifies whether tests abort after a failure.  The default value of the flag is <tt>false</tt>.  This function only has an effect if exception handling is enabled.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table"><tt>setMaxDumpSize(unsigned)</tt></p></td>
<td align="left" valign="top"><p class="table">This function sets the maximum number of bytes that are dumped when
<tt>TS_ASSERT_SAME_DATA()</tt> fails. The default is 0, which indicates no limit.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Note that the the configuration parameters are reset to their default
values after each test is executed (more precisely, after <tt>tearDown()</tt>
is called).  Consequently, calling these functions in the <tt>setUp()</tt>
function has the effect of setting that value for the entire test
suite.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="traits">7. Value Traits</h2>
<div class="sectionbody">
<div class="paragraph"><p>CxxTest&#8217;s test assertions like <a href="#ts_assert_equals">TS_ASSERT_EQUALS</a>
work for built-in types, but they will not likely work for user-defined
data types.  This is because CxxTest needs a way to compare objects
and to convert them to strings when printing test failure summaries.
Thus, user-defined data types need to have the <tt>operator=</tt> method
defined to ensure that test assertions can be applied.</p></div>
<div class="paragraph"><p>For example, the following code</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite7.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;iostream&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite7</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>

   <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> <span style="color: #008080">Data</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #009900">char</span> data<span style="color: #990000">[</span><span style="color: #993399">3</span><span style="color: #990000">];</span>
      <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #0000FF">operator</span></span><span style="color: #990000">==(</span><span style="color: #008080">Data</span> o<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
          <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">memcmp</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">,</span> <span style="color: #990000">&amp;</span>o<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span>o<span style="color: #990000">))</span> <span style="color: #990000">==</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
      <span style="color: #FF0000">}</span>
   <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

   <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> <span style="color: #008080">Data2</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #009900">char</span> data<span style="color: #990000">[</span><span style="color: #993399">3</span><span style="color: #990000">];</span>
   <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testCompareData</span></span><span style="color: #990000">()</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #008080">Data</span> x<span style="color: #990000">,</span> y<span style="color: #990000">;</span>
      <span style="font-weight: bold"><span style="color: #000000">memset</span></span><span style="color: #990000">(</span> x<span style="color: #990000">.</span>data<span style="color: #990000">,</span> <span style="color: #993399">0x12</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span>data<span style="color: #990000">)</span> <span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">memset</span></span><span style="color: #990000">(</span> y<span style="color: #990000">.</span>data<span style="color: #990000">,</span> <span style="color: #993399">0xF6</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span>y<span style="color: #990000">.</span>data<span style="color: #990000">)</span> <span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span> x<span style="color: #990000">,</span> y <span style="color: #990000">);</span>

      <span style="color: #008080">Data2</span> z<span style="color: #990000">,</span> w<span style="color: #990000">;</span>
      <span style="font-weight: bold"><span style="color: #000000">memset</span></span><span style="color: #990000">(</span> z<span style="color: #990000">.</span>data<span style="color: #990000">,</span> <span style="color: #993399">0x12</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span>data<span style="color: #990000">)</span> <span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">memset</span></span><span style="color: #990000">(</span> w<span style="color: #990000">.</span>data<span style="color: #990000">,</span> <span style="color: #993399">0xF6</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span>y<span style="color: #990000">.</span>data<span style="color: #990000">)</span> <span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_SAME_DATA</span></span><span style="color: #990000">(</span> <span style="color: #990000">&amp;</span>z<span style="color: #990000">,</span> <span style="color: #990000">&amp;</span>w<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span>z<span style="color: #990000">)</span> <span style="color: #990000">)</span>
   <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
</tt></pre></div></div>
<div class="paragraph"><p>defines a test runner that generates the following output</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 1 test
In MyTestSuite7::testCompareData:
MyTestSuite7.h:27: Error: Expected (x == y), found ({ 12 12 12  } != { F6 F6 F6  })
MyTestSuite7.h:32: Error: Expected sizeof(z) (3) bytes to be equal at (&amp;z) and (&amp;w), found:
   { 12 12 12 }
     differs from
   { F6 F6 F6 }
Failed 1 of 1 test
Success rate: 0%</tt></pre>
</div></div>
<div class="paragraph"><p>The <tt>operator=</tt> method is required to apply
<a href="#ts_assert_equals">TS_ASSERT_EQUALS</a> to <tt>Data</tt> objects.  However,
the <a href="#ts_assert_same_data">TS_ASSERT_SAME_DATA</a> assertion can be
applied to <tt>Data2</tt> objects that do not have <tt>operator=</tt> defined.</p></div>
<div class="paragraph"><p>Since CxxTest does not rely on any external library, conversion
from arbitrary data types to strings is done using <em>value traits</em>.
For example, to convert an integer to a string, CxxTest does the following:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">10</span><span style="color: #990000">;</span>
CxxTest<span style="color: #990000">::</span><span style="color: #008080">ValueTraits&lt;int&gt;</span> <span style="font-weight: bold"><span style="color: #000000">converter</span></span><span style="color: #990000">(</span>i<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #009900">char</span><span style="color: #990000">*</span> string <span style="color: #990000">=</span> converter<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">asString</span></span><span style="color: #990000">();</span></tt></pre></div></div>
<div class="paragraph"><p>The CxxTest header file <tt>cxxtest/ValueTraits.h</tt> defines value traits
for standard types like <tt>int</tt>, <tt>char</tt>, <tt>double</tt>, etc.  The default
<tt>ValueTraits</tt> class for unknown types dumps up to 8 bytes of the value
in hex format.</p></div>
<div class="paragraph"><p>If the macro <tt>CXXTEST_USER_VALUE_TRAITS</tt> is defined, then CxxTest will
omit the default definitions for <tt>ValueTraits</tt>.  This allows a user to define their own trait specifications to customize the display of trait information.</p></div>
<div class="sect2">
<h3 id="_enumeration_traits">7.1. Enumeration Traits</h3>
<div class="paragraph"><p>CxxTest provides a simple way to define value traits for enumeration
types.  The <tt>CXXTEST_ENUM_TRAITS</tt> macro is used to define value
traits for all members of an enumeration set.</p></div>
<div class="paragraph"><p>For example, the following code</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite9.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">enum</span></span> Answer <span style="color: #FF0000">{</span>
    Yes<span style="color: #990000">,</span>
    No<span style="color: #990000">,</span>
    Maybe<span style="color: #990000">,</span>
    DontKnow<span style="color: #990000">,</span>
    DontCare
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// Declare value traits for the Answer enumeration</span></span>
<span style="font-weight: bold"><span style="color: #000000">CXXTEST_ENUM_TRAITS</span></span><span style="color: #990000">(</span> Answer<span style="color: #990000">,</span>
                     <span style="font-weight: bold"><span style="color: #000000">CXXTEST_ENUM_MEMBER</span></span><span style="color: #990000">(</span> Yes <span style="color: #990000">)</span>
                     <span style="font-weight: bold"><span style="color: #000000">CXXTEST_ENUM_MEMBER</span></span><span style="color: #990000">(</span> No <span style="color: #990000">)</span>
                     <span style="font-weight: bold"><span style="color: #000000">CXXTEST_ENUM_MEMBER</span></span><span style="color: #990000">(</span> Maybe <span style="color: #990000">)</span>
                     <span style="font-weight: bold"><span style="color: #000000">CXXTEST_ENUM_MEMBER</span></span><span style="color: #990000">(</span> DontKnow <span style="color: #990000">)</span>
                     <span style="font-weight: bold"><span style="color: #000000">CXXTEST_ENUM_MEMBER</span></span><span style="color: #990000">(</span> DontCare <span style="color: #990000">)</span> <span style="color: #990000">);</span>

<span style="font-style: italic"><span style="color: #9A1900">// Test the trait values</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">EnumTraits</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_Enum_traits</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> Yes <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> No <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> Maybe <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> DontKnow <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> DontCare <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span> <span style="color: #990000">(</span>Answer<span style="color: #990000">)</span><span style="color: #993399">1000</span> <span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>defines a test runner that generates the following output</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 1 test
In EnumTraits::test_Enum_traits:
MyTestSuite9.h:26: Error: Test failed: Yes
MyTestSuite9.h:27: Error: Test failed: No
MyTestSuite9.h:28: Error: Test failed: Maybe
MyTestSuite9.h:29: Error: Test failed: DontKnow
MyTestSuite9.h:30: Error: Test failed: DontCare
MyTestSuite9.h:31: Error: Test failed: (Answer)1000
Failed 1 of 1 test
Success rate: 0%</tt></pre>
</div></div>
<div class="paragraph"><p>The enumeration value traits print strings that represent the elements of the enumeration, except where a numeric value is provided.</p></div>
<div class="paragraph"><p>Note that the <tt>CXXTEST_ENUM_TRAITS</tt> macros has two arguments;  the list of <tt>CXXTEST_ENUM_MEMBER</tt> macros is not separated by commas!</p></div>
</div>
<div class="sect2">
<h3 id="_defining_new_value_traits">7.2. Defining New Value Traits</h3>
<div class="paragraph"><p>Defining value traits for a new class is done by providing a class
specialization of <tt>ValueTraits</tt> that converts an object of the new
class to a string.  For example, consider the definition of the
<tt>MyClass</tt> class:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyClass.h</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyClass</span>
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>

   <span style="color: #009900">int</span> value<span style="color: #990000">;</span>

   <span style="font-weight: bold"><span style="color: #000000">MyClass</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> value_<span style="color: #990000">)</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">value</span></span><span style="color: #990000">(</span>value_<span style="color: #990000">)</span> <span style="color: #FF0000">{}</span>

   <span style="font-style: italic"><span style="color: #9A1900">// CxxTest requires a copy constructor</span></span>
   <span style="font-weight: bold"><span style="color: #000000">MyClass</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">const</span></span> MyClass<span style="color: #990000">&amp;</span> other<span style="color: #990000">)</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">value</span></span><span style="color: #990000">(</span>other<span style="color: #990000">.</span>value<span style="color: #990000">)</span> <span style="color: #FF0000">{}</span>

   <span style="font-style: italic"><span style="color: #9A1900">// This is required if you want to use TS_ASSERT_EQUALS</span></span>
   <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #0000FF">operator</span></span><span style="color: #990000">==(</span><span style="font-weight: bold"><span style="color: #0000FF">const</span></span> MyClass<span style="color: #990000">&amp;</span> other<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> value <span style="color: #990000">==</span> other<span style="color: #990000">.</span>value<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>

   <span style="font-style: italic"><span style="color: #9A1900">// If you want to use TS_ASSERT_LESS_THAN</span></span>
   <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #0000FF">operator</span></span><span style="color: #990000">&lt;(</span><span style="font-weight: bold"><span style="color: #0000FF">const</span></span> MyClass<span style="color: #990000">&amp;</span> other<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> value <span style="color: #990000">&lt;</span> other<span style="color: #990000">.</span>value<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000080">#ifdef</span></span> CXXTEST_RUNNING
<span style="font-style: italic"><span style="color: #9A1900">// This declaration is only activated when building a CxxTest test suite</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/ValueTraits.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;stdio.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">namespace</span></span> CxxTest
<span style="color: #FF0000">{</span>
   CXXTEST_TEMPLATE_INSTANTIATION
   <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">ValueTraits</span><span style="color: #990000">&lt;</span>MyClass<span style="color: #990000">&gt;</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #009900">char</span> _s<span style="color: #990000">[</span><span style="color: #993399">256</span><span style="color: #990000">];</span>

   <span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
      <span style="font-weight: bold"><span style="color: #000000">ValueTraits</span></span><span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> MyClass<span style="color: #990000">&amp;</span> m <span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #000000">sprintf</span></span><span style="color: #990000">(</span> _s<span style="color: #990000">,</span> <span style="color: #FF0000">"MyClass( %i )"</span><span style="color: #990000">,</span> m<span style="color: #990000">.</span>value <span style="color: #990000">);</span> <span style="color: #FF0000">}</span>
      <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #009900">char</span> <span style="color: #990000">*</span><span style="font-weight: bold"><span style="color: #000000">asString</span></span><span style="color: #990000">()</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> _s<span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
   <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">// CXXTEST_RUNNING</span></span></tt></pre></div></div>
<div class="paragraph"><p>This class includes definitions of <tt>operator==</tt> and <tt>operator&lt;</tt>
that support comparisons with <a href="#ts_assert_equals">TS_ASSERT_EQUALS</a>
and <a href="#ts_assert_less_than">TS_ASSERT_LESS_THAN</a>.  Additionally,
this header contains a specialization of <tt>ValueTraits</tt> (in the
<tt>CxxTest</tt> namespace) that generates a string description of a <tt>MyClass</tt>
instance.</p></div>
<div class="paragraph"><p>The following test suite illustrates how these definitions can be
used to define a test runner:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite10.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;MyClass.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite10</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_le</span></span><span style="color: #990000">()</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #008080">MyClass</span> <span style="font-weight: bold"><span style="color: #000000">x</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">),</span> <span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_LESS_THAN</span></span><span style="color: #990000">(</span> x<span style="color: #990000">,</span> y <span style="color: #990000">);</span>
   <span style="color: #FF0000">}</span>

   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_eq</span></span><span style="color: #990000">()</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #008080">MyClass</span> <span style="font-weight: bold"><span style="color: #000000">x</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">),</span> <span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span> x<span style="color: #990000">,</span> y <span style="color: #990000">);</span>
   <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
</tt></pre></div></div>
<div class="paragraph"><p>This runner for this test suite generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 2 tests.
In MyTestSuite10::test_eq:
MyTestSuite10.h:17: Error: Expected (x == y), found (MyClass( 1 ) != MyClass( 2 ))
Failed 1 of 2 tests
Success rate: 50%</tt></pre>
</div></div>
<div class="paragraph"><p>The test failure print logic uses the specialization of <tt>ValueTraits</tt> to create
the string description of <tt>MyClass</tt> that appears in the output.</p></div>
</div>
<div class="sect2">
<h3 id="_defining_value_traits_for_template_classes">7.3. Defining Value Traits for Template Classes</h3>
<div class="paragraph"><p>A simple modification to the above example illustrates how a trait can be defined for a
template class:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MyTestSuite11.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;TMyClass.h&gt;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyTestSuite11</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_le</span></span><span style="color: #990000">()</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #008080">TMyClass&lt;int&gt;</span> <span style="font-weight: bold"><span style="color: #000000">x</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">),</span> <span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_LESS_THAN</span></span><span style="color: #990000">(</span> x<span style="color: #990000">,</span> y <span style="color: #990000">);</span>
   <span style="color: #FF0000">}</span>

   <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_eq</span></span><span style="color: #990000">()</span>
   <span style="color: #FF0000">{</span>
      <span style="color: #008080">TMyClass&lt;int&gt;</span> <span style="font-weight: bold"><span style="color: #000000">x</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">),</span> <span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">);</span>
      <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span> x<span style="color: #990000">,</span> y <span style="color: #990000">);</span>
   <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>
</tt></pre></div></div>
<div class="paragraph"><p>Unfortunately, this example employs partial template specialization, which  is not supported by all C++ compilers.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mock">8. Testing with Mock Objects</h2>
<div class="sectionbody">
<div class="paragraph"><p>Mock Objects are a very useful concept for testing complex software.
The key idea is to pass special objects to tested code that facilitates
the testing process.  For instance, a class that implements a
protocol over TCP might rely on an abstract <tt>ISocket</tt> interface.
Then a mock testing strategy could pass a <tt>MockSocket</tt> object that
does anything that is useful for testing (e.g., keep a log of all
data &#8220;sent&#8221; to verify later).</p></div>
<div class="paragraph"><p>However, when a challenge for C/C++ developers is that you may need
to call <em>global</em> functions which you cannot override.  Consider any
code that uses <tt>fopen()</tt>, <tt>fwrite()</tt> and <tt>fclose()</tt>.  It is not
very elegant to have this code actually create files while being
tested.  Even more importantly, you need to test how the code behaves
when &#8220;bad&#8221; things happen (e.g., when <tt>fopen()</tt> fails).  Handling
these types of exceptional conditions is often a very challenging
issue for software testing.</p></div>
<div class="paragraph"><p>CxxTest addresses this challenge by providing a generic mechanism for
defining mock global functions.  The next section illustrates this mechanism for a single
global function.  The following section provides more detail about specific features of CxxTest&#8217;s
support for mock testing.</p></div>
<div class="sect2">
<h3 id="_example_a_mock_tt_time_tt_function">8.1. Example: A Mock <tt>time()</tt> Function</h3>
<div class="paragraph"><p>Suppose that we want to perform mock testing using the well known
standard library function <tt>time()</tt>.  Setting up a test suite with
a mock global function for <tt>time()</tt> can be broken down into the
following steps.</p></div>
<div class="sect3">
<h4 id="_declare_mock_functions">8.1.1. Declare Mock Functions</h4>
<div class="paragraph"><p>The <tt>CXXTEST_MOCK_GLOBAL</tt> macro is used to declare mock global functions.  It is often convenient to include
these declarations in a header file, which is used in both the test suite as well as the code that is being tested:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// time_mock.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;time.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/Mock.h&gt;</span>

<span style="font-weight: bold"><span style="color: #000000">CXXTEST_MOCK_GLOBAL</span></span><span style="color: #990000">(</span> time_t<span style="color: #990000">,</span>        <span style="font-style: italic"><span style="color: #9A1900">/* Return type          */</span></span>
                     time<span style="color: #990000">,</span>          <span style="font-style: italic"><span style="color: #9A1900">/* Name of the function */</span></span>
                     <span style="color: #990000">(</span> <span style="color: #008080">time_t</span> <span style="color: #990000">*</span>t <span style="color: #990000">),</span> <span style="font-style: italic"><span style="color: #9A1900">/* Prototype            */</span></span>
                     <span style="color: #990000">(</span> t <span style="color: #990000">)</span>          <span style="font-style: italic"><span style="color: #9A1900">/* Argument list        */</span></span> <span style="color: #990000">);</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_mock_functions_in_tested_code">8.1.2. Mock Functions in Tested Code</h4>
<div class="paragraph"><p>The tested code uses mock global functions, rather than using the global functions directly.
You access mock functions in the <tt>T</tt> (for <em>Test</em>) namespace, so the tested code calls <tt>T::time()</tt> instead of
<tt>time()</tt>. This is the equivalent of using abstract interfaces
instead of concrete classes.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// rand_example.cpp</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;time_mock.h&gt;</span>

<span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">generateRandomNumber</span></span><span style="color: #990000">()</span>
<span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> T<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">(</span> NULL <span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_mock_source_files">8.1.3. Mock Source Files</h4>
<div class="paragraph"><p>A source file needs to be defined that implements <tt>T::time()</tt> by
calling the real global function.  This definition is performed automatically by
defining <tt>CXXTEST_MOCK_REAL_SOURCE_FILE</tt> before the header file is defined:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// time_real.cpp</span></span>
<span style="font-weight: bold"><span style="color: #000080">#define</span></span> CXXTEST_MOCK_REAL_SOURCE_FILE
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;time_mock.h&gt;</span></tt></pre></div></div>
<div class="paragraph"><p>This source file is not used for testing, but instead it supports normal use of the tested code.</p></div>
<div class="paragraph"><p>Similarly, a source file needs to be defined that implements <tt>T::time()</tt> by calling the mock
global function.  This definition is performed automatically by defining <tt>CXXTEST_MOCK_TEST_SOURCE_FILE</tt> before the header file is defined:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// time_mock.cpp</span></span>
<span style="font-weight: bold"><span style="color: #000080">#define</span></span> CXXTEST_MOCK_TEST_SOURCE_FILE
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;time_mock.h&gt;</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_test_suites_using_mock_functions">8.1.4. Test Suites using Mock Functions</h4>
<div class="paragraph"><p>A mock object for the <tt>time()</tt> function is created using the <tt>T::Base_time</tt> class,
which is automatically created by CxxTest.  This class includes a <tt>time()</tt> method whose
API is the same as the global <tt>time()</tt> function.  Thus, this method can be defined to have
whatever behavior is desired during testing.  For example, the following example defines a
mock object that increments a counter to define an incremental value for <tt>time()</tt>.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// MockTestSuite.h</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;cxxtest/TestSuite.h&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;time_mock.h&gt;</span>

<span style="color: #009900">int</span> <span style="font-weight: bold"><span style="color: #000000">generateRandomNumber</span></span><span style="color: #990000">();</span>


<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MockObject</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> T<span style="color: #990000">::</span>Base_time
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #000000">MockObject</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> initial<span style="color: #990000">)</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">counter</span></span><span style="color: #990000">(</span>initial<span style="color: #990000">)</span> <span style="color: #FF0000">{}</span>
    <span style="color: #009900">int</span> counter<span style="color: #990000">;</span>
    <span style="color: #008080">time_t</span> <span style="font-weight: bold"><span style="color: #000000">time</span></span><span style="color: #990000">(</span> time_t <span style="color: #990000">*</span> <span style="color: #990000">)</span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> counter<span style="color: #990000">++;</span> <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">TestRandom</span> <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> CxxTest<span style="color: #990000">::</span>TestSuite
<span style="color: #FF0000">{</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_generateRandomNumber</span></span><span style="color: #990000">()</span>
    <span style="color: #FF0000">{</span>
        <span style="color: #008080">MockObject</span> <span style="font-weight: bold"><span style="color: #000000">t</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #000000">generateRandomNumber</span></span><span style="color: #990000">(),</span> <span style="color: #993399">3</span> <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #000000">generateRandomNumber</span></span><span style="color: #990000">(),</span> <span style="color: #993399">6</span> <span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #000000">generateRandomNumber</span></span><span style="color: #990000">(),</span> <span style="color: #993399">9</span> <span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>Note that CxxTest uses global data to associate calls made with <tt>T::time()</tt>
to calls to <tt>MockObject::time()</tt>.  The <tt>MockObject</tt> class simply
needs to be instantiated prior to the call to <tt>T::time()</tt>.</p></div>
</div>
<div class="sect3">
<h4 id="_building_the_test_runner">8.1.5. Building the Test Runner</h4>
<div class="paragraph"><p>The <tt>cxxtestgen</tt> command is used to create a test runner with mock functions in a normal manner:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cxxtestgen --error-printer -o runner<span style="color: #990000">.</span>cpp MockTestSuite<span style="color: #990000">.</span>h</tt></pre></div></div>
<div class="paragraph"><p>The test runner source file, <tt>runner.cpp</tt>, needs to be compiled an linked to the mock function definition, <tt>time_mock.cpp</tt>, as well as the code being tested, <tt>rand_example.cpp</tt>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>g<span style="color: #990000">++</span> -o runner -I<span style="color: #990000">.</span> -I<span style="color: #009900">$CXXTEST</span> runner<span style="color: #990000">.</span>cpp time_mock<span style="color: #990000">.</span>cpp rand_example<span style="color: #990000">.</span>cpp</tt></pre></div></div>
<div class="paragraph"><p>This generates a test runner that generates the following output:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Running 1 test.OK!</tt></pre>
</div></div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced_topics">8.2. Advanced Topics</h3>
<div class="sect3">
<h4 id="_void_functions">8.2.1. Void Functions</h4>
<div class="paragraph"><p>The <tt>CXXTEST_MOCK_VOID_GLOBAL</tt> is used to define mock global functions that return <tt>void</tt>.
This is identical to
<tt>CXXTEST_MOCK_GLOBAL</tt> except that it does not specify the return
type.  Take a look in <tt>sample/mock/T/stdlib.h</tt> for a demonstation.</p></div>
</div>
<div class="sect3">
<h4 id="_calling_the_real_functions_while_testing">8.2.2. Calling the Real Functions While Testing</h4>
<div class="paragraph"><p>During testing it is sometimes necessary to call the real global
function instead of the mock global function.  CxxTest allows a
user to do this by creating a special mock object.  For a global
mock function of <tt>time()</tt>, the object <tt>T::Real_time</tt> represents the
real function.  If this class is created, then <tt>T::time()</tt> will be
redirected to the real function.</p></div>
</div>
<div class="sect3">
<h4 id="_mocking_nonexistent_functions">8.2.3. Mocking Nonexistent Functions</h4>
<div class="paragraph"><p>Sometimes the tested code calls functions that are not available
when testing.  For example, this can happen when testing driver
code that calls kernel functions that are not available to a user-mode
test runner.  CxxTest can provide mock global function definitions
for the test code while using the original functions in the tested code.</p></div>
<div class="paragraph"><p>The <tt>CXXTEST_SUPPLY_GLOBAL</tt> and <tt>CXXTEST_SUPPLY_VOID_GLOBAL</tt> macros are used to provide mock global function definitions.  For example, the following declaration creates a mock global function for the Win32 kernel function <tt>IoCallDriver</tt>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">CXXTEST_SUPPLY_GLOBAL</span></span><span style="color: #990000">(</span> NTSTATUS<span style="color: #990000">,</span>                <span style="font-style: italic"><span style="color: #9A1900">/* Return type */</span></span>
                       IoCallDriver<span style="color: #990000">,</span>            <span style="font-style: italic"><span style="color: #9A1900">/* Name        */</span></span>
                       <span style="color: #990000">(</span> <span style="color: #008080">PDEVICE_OBJECT</span> Device<span style="color: #990000">,</span> <span style="font-style: italic"><span style="color: #9A1900">/* Prototype   */</span></span>
                         <span style="color: #008080">PIRP</span> Irp <span style="color: #990000">),</span>
                       <span style="color: #990000">(</span> Device<span style="color: #990000">,</span> Irp <span style="color: #990000">)</span>          <span style="font-style: italic"><span style="color: #9A1900">/* How to call */</span></span> <span style="color: #990000">);</span></tt></pre></div></div>
<div class="paragraph"><p>The tested driver code calls <tt>IoCallDriver()</tt> normally;  there is no need for the <tt>T::</tt> syntax.
The test suite is defined using the <tt>T::Base_IoCallDriver</tt> as with normal mock objects.</p></div>
<div class="paragraph"><p>CxxTest also provides the macros <tt>CXXTEST_SUPPLY_GLOBAL_C</tt> and
<tt>CXXTEST_SUPPLY_GLOBAL_VOID_C</tt> that declare the functions with <tt>C</tt>
linkage (i.e., using <tt>extern "C"</tt>).  These macros are used to declare
function prototypes, since you may not be able to include the header
files in the test suite that are associated with the mock global function.</p></div>
</div>
<div class="sect3">
<h4 id="_functions_in_namespaces">8.2.4. Functions in Namespaces</h4>
<div class="paragraph"><p>The <tt>CXXTEST_MOCK</tt> macro is used to declare a mock global function that is associated
with a function in a namespace, including static class member functions.
For example, consider the function <tt>bool Files::FileExists( const
String &amp;name )</tt>;  the namespace <tt>Files</tt> contains the function
<tt>FileExists</tt>.  The mock class will be called <tt>T::Base_Files_FileExists</tt>
and the function to implemented would be <tt>fileExists</tt>.  The <tt>CXXTEST_MOCK</tt> macro declares this mock global function as follows:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">CXXTEST_MOCK</span></span><span style="color: #990000">(</span> Files_FileExists<span style="color: #990000">,</span>       <span style="font-style: italic"><span style="color: #9A1900">/* Suffix of mock class  */</span></span>
              <span style="color: #009900">bool</span><span style="color: #990000">,</span>                   <span style="font-style: italic"><span style="color: #9A1900">/* Return type           */</span></span>
              fileExists<span style="color: #990000">,</span>             <span style="font-style: italic"><span style="color: #9A1900">/* Name of mock member   */</span></span>
              <span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #008080">String</span> <span style="color: #990000">&amp;</span>name <span style="color: #990000">),</span> <span style="font-style: italic"><span style="color: #9A1900">/* Prototype             */</span></span>
              Files<span style="color: #990000">::</span>FileExists<span style="color: #990000">,</span>      <span style="font-style: italic"><span style="color: #9A1900">/* Name of real function */</span></span>
              <span style="color: #990000">(</span> name <span style="color: #990000">)</span>                <span style="font-style: italic"><span style="color: #9A1900">/* Parameter list        */</span></span> <span style="color: #990000">);</span></tt></pre></div></div>
<div class="paragraph"><p>Similarly, the <tt>CXXTEST_MOCK_VOID</tt> macro is used to declare a mock global function that returns <tt>void</tt>.</p></div>
<div class="paragraph"><p>The <tt>CXXTEST_SUPPLY</tt> and <tt>CXXTEST_SUPPLY_VOID</tt> macros are used to provide mock global function definitions for nonexistent functions.  For example:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000000">CXXTEST_SUPPLY</span></span><span style="color: #990000">(</span> AllocateIrp<span style="color: #990000">,</span>         <span style="font-style: italic"><span style="color: #9A1900">/* =&gt; T::Base_AllocateIrp */</span></span>
                PIRP<span style="color: #990000">,</span>                <span style="font-style: italic"><span style="color: #9A1900">/* Return type            */</span></span>
                allocateIrp<span style="color: #990000">,</span>         <span style="font-style: italic"><span style="color: #9A1900">/* Name of mock member    */</span></span>
                <span style="color: #990000">(</span> <span style="color: #008080">CCHAR</span> StackSize <span style="color: #990000">),</span> <span style="font-style: italic"><span style="color: #9A1900">/* Prototype              */</span></span>
                IoAllocateIrp<span style="color: #990000">,</span>       <span style="font-style: italic"><span style="color: #9A1900">/* Name of real function  */</span></span>
                <span style="color: #990000">(</span> StackSize <span style="color: #990000">)</span>        <span style="font-style: italic"><span style="color: #9A1900">/* Parameter list         */</span></span> <span style="color: #990000">);</span></tt></pre></div></div>
<div class="paragraph"><p>Similarly, the <tt>CXXTEST_SUPPLY_C</tt> and <tt>CXXTEST_SUPPLY_VOID_C</tt> macros declare the functions with <tt>C</tt> linkage.</p></div>
</div>
<div class="sect3">
<h4 id="_overloaded_functions">8.2.5. Overloaded Functions</h4>
<div class="paragraph"><p>The <tt>CXXTEST_MOCK</tt> and <tt>CXXTEST_MOCK_VOID</tt> macros have a flexible
interface that can provide mock global function definitions for
overloaded functions.  The arguments simply need to specify different
mock class names, mock member names and different prototype definitions.
These different mock declarations will generate different mock objects that can be explicitly
referenced in a test suite.</p></div>
</div>
<div class="sect3">
<h4 id="_the_mock_namespace">8.2.6. The Mock Namespace</h4>
<div class="paragraph"><p>The default namespace for mock functions is <tt>T::</tt>.  This namespace can be changed by defining the
<tt>CXXTEST_MOCK_NAMESPACE</tt> macro.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation">9. Installation</h2>
<div class="sectionbody">
<div class="paragraph"><p>A key feature of CxxTest is that it does has virtually no installation
process.  The <tt>cxxtestgen</tt> script can be added be directly executed
from the <tt>cxxtest/bin</tt> directory, so it may be convenient to add
this directory to a <tt>PATH</tt> environment.  Beyond that, the build
process for CxxTest simply needs to reference the <tt>cxxtest</tt> root
directory to enable proper includes while compiling test runners.</p></div>
<div class="paragraph"><p>The <tt>cxxtestgen</tt> script script should work with versions Python 2.6
or newer.  The FOG parser requires two Python packages:</p></div>
<div class="ulist"><ul>
<li>
<p>
<tt>ply</tt>
</p>
</li>
<li>
<p>
<tt>ordereddict</tt> (This is only needed when running Python 2.6)
</p>
</li>
</ul></div>
<div class="paragraph"><p>If these packages are not available, then <tt>cxxtestgen</tt> will generate an error when the
FOG parser option is selected.
If you have
<a href="http://pypi.python.org/pypi/setuptools">setuptools</a> or
<a href="http://pypi.python.org/pypi/distribute">distribute</a>
installed, then
you can install these packages from PyPI by executing</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>easy_install ply
easy_install ordereddict</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="discussion">10. Status and Future Plans</h2>
<div class="sectionbody">
<div class="paragraph"><p>The CxxTest 4.0 release reflects major changes in the management
and focus of CxxTest.  The 4.0 release is the first release of
CxxTest in over seven years, and virtually all of the initial
developers have moved on to other projects.  CxxTest is heavily
used at Sandia National Laboratories, and Sandia&#8217;s ongoing use of
CxxTest is a major driver for the 4.0 release.</p></div>
<div class="paragraph"><p>Similarly, major
changes in CxxTest reflect the focus of the developer team:</p></div>
<div class="ulist"><ul>
<li>
<p>
Perl is no longer used to support CxxTest scripts.  Python is now the only scripting language used by CxxTest.
</p>
</li>
<li>
<p>
The testing scripts have been rewritten using the PyUnit framework.
</p>
</li>
<li>
<p>
The installation process for CxxTest now leverages and integrates with the system Python installation.
</p>
</li>
<li>
<p>
A more comprehensive C++ parser is now available, which supports testing of templates.
</p>
</li>
<li>
<p>
The CxxTest GUI is no longer supported, and the <a href="#ts_warn">TS_WARN</a> is deprecated.
</p>
</li>
<li>
<p>
CxxTest runners now have a command-line interface that facilitates interative use of the test runner.
</p>
</li>
<li>
<p>
A new user guide is now available in PDF, HTML and Ebook formats.
</p>
</li>
<li>
<p>
Updated the <tt>cxxtestgen</tt> script to work with Python 2.6 through 3.2
</p>
</li>
</ul></div>
<div class="paragraph"><p>Additionally, CxxTest is now validated with continuous integration
tests.  Yes, the CxxTest developers eat their own dog food!</p></div>
<div class="paragraph"><p>Although the GUI option for <tt>cxxtestgen</tt> appears to work fine, this
GUI is rather primitive.  It simply provides a visual summary of
the test results, and not the interactive test execution that a
user would expect.  This capability is deprecated since none of the
current developers use this feature.  CxxTest users should consider
using CxxTest with <a href="http://jenkins-ci.org/">Jenkins</a>.  The <tt>XUnitPrinter</tt>
test listener generates XML files that can be easily integrated by
<a href="http://jenkins-ci.org/">Jenkins</a>, which creates a visual summary of
test results with links to drill-down into test outputs.</p></div>
<div class="paragraph"><p>This documentation has highlighted the commonly used test listeners.
There are a variety of other test listeners provided by CxxTest
that support advanced Cxxtest applications.  For example, the
<tt>YesNoRunner</tt> is perhaps the simplest test listener;  it simply
returns the number of test failures.  The <tt>StdioFilePrinter</tt> is
used by <tt>StdioPrinter</tt>, but it does not assume that <tt>stdio</tt> is the
default output stream.  This test listener can be used in contexts
where a custom output stream must be specified.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph"><p>CxxTest was originally developed by Erez Volk.  The following
developers actively contributed to the CxxTest 4.0 release:</p></div>
<div class="ulist"><ul>
<li>
<p>
Gašper Ažman
</p>
</li>
<li>
<p>
Kevin Fitch
</p>
</li>
<li>
<p>
William Hart
</p>
</li>
<li>
<p>
John Siirola
</p>
</li>
</ul></div>
<div class="paragraph"><p>The CxxTest documentation is generated using
<a href="http://www.methods.co.nz/asciidoc/">AsciiDoc</a>.  The following people
have contributed to the CxxTest User Manual:</p></div>
<div class="ulist"><ul>
<li>
<p>
William Hart
</p>
</li>
<li>
<p>
Lionel Orry
</p>
</li>
<li>
<p>
Erez Volk
</p>
</li>
</ul></div>
<div class="paragraph"><p>A major advancement in CxxTest&#8217;s capability is the new test discovery
mechanism that is based on a parser of the Flexible Object Language
(FOG).  FOG generalizes the C++ syntax, which enables CxxTest to
extract high-level class structure for test discovery.  FOG was
developed by Edward Willink:</p></div>
<div class="ulist"><ul>
<li>
<p>
Edward D. Willink.  <em>Meta-Compilation for C++</em>, PhD Thesis, Computer Science Research Group, University of Surrey, January 2000.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The FOG parser in CxxTest critically relies on the excellent LALR
parser provided by Dave Beazley&#8217;s <tt>ply</tt> Python package.  The scalable
performance of <tt>ply</tt> is critical for CxxTest.</p></div>
<div class="paragraph"><p>CxxTest has greatly benefited from the support of the open source
community.  We would like to thank the following organizations for
providing web hosting and computing resources: GitHub, SourceForge,
Tigris.org, Sandia National Laboratories, Google and COIN-OR.  The development
of CxxTest has been partially supported by Sandia National Laboratories.
Sandia National Laboratories is a multi-program laboratory managed
and operated by Sandia Corporation, a wholly owned subsidiary of
Lockheed Martin Corporation, for the U.S.  Department of Energy&#8217;s
National Nuclear Security Administration under contract DE-AC04-94AL85000.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_A">Appendix A: Test Assertion Examples</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert"></a> TS_ASSERT
</dt>
<dd>
<p>
This is the most basic test assertion, which simply verifies that the <tt>expr</tt> argument is true:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span> <span style="color: #990000">&gt;</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_delta"></a> TS_ASSERT_DELTA
</dt>
<dd>
<p>
This test assertion verifies two floating point values are within a specified absolute difference:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_delta</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_DELTA</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">sqrt</span></span><span style="color: #990000">(</span><span style="color: #993399">4.0</span><span style="color: #990000">),</span> <span style="color: #993399">2.0</span><span style="color: #990000">,</span> <span style="color: #993399">1e-7</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_differs"></a> TS_ASSERT_DIFFERS
</dt>
<dd>
<p>
This test assertion verifies that the two arguments are not equal:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_differs</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_DIFFERS</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_equals"></a> TS_ASSERT_EQUALS
</dt>
<dd>
<p>
  This test assertion verifies that the two arguments are equal:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_equals</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">21</span> <span style="color: #990000">%</span> <span style="color: #993399">5</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Note that this test is performed using the C++ <tt>==</tt> operator, whose behavior may be redefined for the two argument types.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_less_than"></a> TS_ASSERT_LESS_THAN
</dt>
<dd>
<p>
This test assertion verifies that the first argument is strictly less than the second argument:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_less_than</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_LESS_THAN</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_less_than_equals"></a> TS_ASSERT_LESS_THAN_EQUALS
</dt>
<dd>
<p>
This test assertion verifies that the first argument is less than or equal to the second argument:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_less_than_equals</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_LESS_THAN_EQUALS</span></span><span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_predicate"></a> TS_ASSERT_PREDICATE
</dt>
<dd>
<p>
This test assertion takes as an argument the name of a class, similar to a STL <tt>unary_function</tt>, and evaluates the <tt>operator()</tt> method:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">IsOdd</span>
    <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
        <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #0000FF">operator</span></span><span style="color: #990000">()(</span><span style="color: #009900">int</span> x<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> x <span style="color: #990000">%</span> <span style="color: #993399">2</span> <span style="color: #990000">==</span> <span style="color: #993399">1</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_predicate</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_PREDICATE</span></span><span style="color: #990000">(</span>IsOdd<span style="color: #990000">,</span> <span style="color: #993399">29</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>This test assertion can be seen as a generalization of <a href="#ts_assert">TS_ASSERT</a>, but it
allows the tester to see the failed value.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_relation"></a> TS_ASSERT_RELATION
</dt>
<dd>
<p>
It takes as an argument the name of a class, similar to a STL <tt>binary_function</tt>, and evaluates the <tt>operator()</tt> method:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_relation</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_RELATION</span></span><span style="color: #990000">(</span>std<span style="color: #990000">::</span>greater<span style="color: #990000">&lt;</span><span style="color: #009900">double</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1e6</span><span style="color: #990000">,</span> <span style="color: #993399">1000.0</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>This test assertion can be seen as a generalization of <a href="#ts_assert_equals">TS_ASSERT_EQUALS</a>, <a href="#ts_assert_differs">TS_ASSERT_DIFFERS</a>, <a href="#ts_assert_less_than">TS_ASSERT_LESS_THAN</a> and <a href="#ts_assert_less_than_equals">TS_ASSERT_LESS_THAN_EQUALS</a>.
This can be used to assert comparisons which are not covered by the builtin test assertions.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_same_data"></a> TS_ASSERT_SAME_DATA
</dt>
<dd>
<p>
This test assertion is similar to <a href="#ts_assert_equals">TS_ASSERT_EQUALS</a>,
except that it compares the contents of two buffers in memory:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_same_data</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="color: #009900">char</span> input <span style="color: #990000">=</span> <span style="color: #FF0000">"The quick brown fox ran over the lazy dog"</span><span style="color: #990000">;</span>
        <span style="color: #009900">char</span> output<span style="color: #990000">[</span><span style="color: #993399">26</span><span style="color: #990000">];</span>
        <span style="font-weight: bold"><span style="color: #000000">memcopy</span></span><span style="color: #990000">(</span>output<span style="color: #990000">,</span> input<span style="color: #990000">,</span> <span style="color: #993399">26</span><span style="color: #990000">);</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_SAME_DATA</span></span><span style="color: #990000">(</span>input<span style="color: #990000">,</span> output<span style="color: #990000">,</span> <span style="color: #993399">26</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>The standard runner dumps the contents of both buffers as hex values when this test fails.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_throws"></a> TS_ASSERT_THROWS
</dt>
<dd>
<p>
This test assertion verifies that the specified exception is thrown when the first argument is executed:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">throws_runtime_error</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="color: #008080">raise</span> std<span style="color: #990000">::</span>runtime_error<span style="color: #990000">,</span> <span style="color: #FF0000">"This method simply generates an exception"</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_throws</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_THROWS</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">throws_runtime_error</span></span><span style="color: #990000">(),</span> std<span style="color: #990000">::</span>runtime_error<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_throws_anything"></a> TS_ASSERT_THROWS_ANYTHING
</dt>
<dd>
<p>
This test assertion verifies that <em>some</em> exception is thrown when the first argument is executed:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_throws_anything</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_THROWS_ANYTHING</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">throws_runtime_error</span></span><span style="color: #990000">());</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_throws_assert"></a> TS_ASSERT_THROWS_ASSERT
</dt>
<dd>
<p>
This test assertion verifies that an exception is thrown when executing the first argument.  The second argument specifies a variable declaration for the exception, and the third argument is executed to test that
exception value:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">throws_value</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        raise <span style="color: #993399">1</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_throws_assert</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_THROWS_ASSERT</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">throws_value</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> Error <span style="color: #990000">&amp;</span> e<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_EQUALS</span></span><span style="color: #990000">(</span>e<span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">));</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Note that this can be viewed as a generalization of <a href="#ts_assert_throws_equals">TS_ASSERT_THROWS_EQUALS</a>.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_throws_equals"></a> TS_ASSERT_THROWS_EQUALS
</dt>
<dd>
<p>
This test assertion verifies that an exception is thrown when executing the first argument.  The second argument specifies a variable declaration for the exception, and the third and fourth arguments are values that are asserted equal after the exception is thrown:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_throws_equals</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_THROWS_EQUALS</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">throws_value</span></span><span style="color: #990000">(),</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> Error <span style="color: #990000">&amp;</span> e<span style="color: #990000">,</span> e<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">what</span></span><span style="color: #990000">(),</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_assert_throws_nothing"></a> TS_ASSERT_THROWS_NOTHING
</dt>
<dd>
<p>
This test assertion verifies that an exception is <em>not</em> thrown when executing the first argument:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">throws_nothing</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span> <span style="color: #FF0000">}</span>

    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_assert_throws_nothing</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_ASSERT_THROWS_ASSERT</span></span><span style="color: #990000">(</span>self<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">throws_nothing</span></span><span style="color: #990000">());</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_fail"></a> TS_FAIL
</dt>
<dd>
<p>
This function triggers a test failure with an associated message:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_fail</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_FAIL</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"This test has failed."</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_trace"></a> TS_TRACE
</dt>
<dd>
<p>
This function prints an informational message:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_trace</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_TRACE</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"This is a test tracing message."</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<a id="ts_warn"></a> TS_WARN
</dt>
<dd>
<p>
This function prints a message as a warning:
</p>
</dd>
</dl></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">test_warn</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span>
    <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #000000">TS_WARN</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"This is a warning message."</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_B">Appendix B: Integrating with Your Build Environment</h2>
<div class="sectionbody">
<div class="paragraph"><p>CxxTest can be integrated into a variety of build environments to
automate the generation, compilation and execution of test runners.
Here is a rough breakdown of this process:</p></div>
<div class="ulist"><ul>
<li>
<p>
Split the application into a library and a main module that just
  calls the library classes.  This way, the test runner will be
  able to access all your classes through the library.
</p>
</li>
<li>
<p>
Create another application (or target, or project, or whatever)
  for the test runner.  Make the build tool generate it automatically.
</p>
</li>
<li>
<p>
Configure the build tool to run the tests automatically.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Unfortunately, different build tools and IDEs need to setup this
process in different ways.  The following sections provide rough
guidance for doing this for some come use cases.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">These examples are not actively maintained and tested.  Please send
suggestions to the CxxTest developers for updating this documentation.</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="_using_makefiles">Using Makefiles</h3>
<div class="paragraph"><p>Generating the tests with a makefile is pretty straightforward.
Simply add rules to generate, compile and run the test runner.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">all:</span> lib run_tests app

<span style="font-style: italic"><span style="color: #9A1900"># Rules to build your targets</span></span>
<span style="color: #990000">lib:</span> <span style="color: #990000">...</span>

<span style="color: #990000">app:</span> <span style="color: #990000">...</span>

<span style="font-style: italic"><span style="color: #9A1900"># A rule that runs the unit tests</span></span>
<span style="color: #990000">run_tests:</span> runner
        <span style="color: #990000">.</span>/runner

<span style="font-style: italic"><span style="color: #9A1900"># How to build the test runner</span></span>
<span style="color: #990000">runner:</span> runner.cpp lib
        g<span style="color: #990000">++</span> -o <span style="color: #009900">$@</span> <span style="color: #009900">$^</span>

<span style="font-style: italic"><span style="color: #9A1900"># How to generate the test runner</span></span>
<span style="color: #990000">runner.cpp:</span> SimpleTest.h ComplicatedTest.h
         cxxtestgen -o <span style="color: #009900">$@</span> --error-printer <span style="color: #009900">$^</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_using_cons">Using Cons</h3>
<div class="paragraph"><p><a href="http://dsmit.com/cons/">Cons</a> is a powerful and
versatile make replacement which uses Perl scripts instead of Makefiles.</p></div>
<div class="paragraph"><p>See <tt>cxxtest/sample/Construct</tt> in the CxxTest distribution for an
example of building CxxTest test runners with Cons.</p></div>
</div>
<div class="sect2">
<h3 id="_using_microsoft_visual_studio">Using Microsoft Visual Studio</h3>
<div class="paragraph"><p>See <tt>cxxtest/sample/msvc</tt> in the distribution
to see a reasonable integration of CxxTest with Microsoft Visual Studio&#8217;s IDE.
Basically, the workspace has three
projects:</p></div>
<div class="ulist"><ul>
<li>
<p>
The project <tt>CxxTest_3_Generate</tt> runs <tt>cxxtestgen</tt>.
</p>
</li>
<li>
<p>
The project <tt>CxxTest_2_Build</tt> compiles the generated file.
</p>
</li>
<li>
<p>
The project <tt>CxxTest_1_Run</tt> runs the tests.
</p>
</li>
</ul></div>
<div class="paragraph"><p>This method certainly works, and the test results are conveniently
displayed as compilation errors and warnings (for <a href="#ts_warn">TS_WARN</a>.
However, there are still a few things missing; to integrate this
approach with your own project, you usually need to work a little
bit and tweak some makefiles and project options.  The script
<tt>sample/msvc/FixFiles.bat</tt> can automate some of this process.</p></div>
</div>
<div class="sect2">
<h3 id="_using_microsoft_windows_ddk">Using Microsoft Windows DDK</h3>
<div class="paragraph"><p>To use CxxTest with the <tt>build</tt> utility for device drivers, you add
the generated tests file as an extra dependency using the
<tt>NTBUILDTARGET0</tt> macro and the <tt>Makefile.inc</tt> file.  An example of
how to do this is in the CxxTest distribution under <tt>sample/winddk</tt>.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_C">Appendix C: Testing CxxTest</h2>
<div class="sectionbody">
<div class="paragraph"><p>In the <tt>cxxtest/test</tt> directory, you can execute</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>python test_cxxtest<span style="color: #990000">.</span>py</tt></pre></div></div>
<div class="paragraph"><p>to launch all tests.  By default, this script executes test suites
for a variety of compilers if they are found on the user&#8217;s path:
<tt>g++</tt>, <tt>clang++</tt>, <tt>cl</tt> (the Microsoft Visual Studio compiler).
Additionally, this test script includes separate test suites for
the default test discovery mechanism as well as test discovery using
the new FOG parser.</p></div>
<div class="paragraph"><p>You can execute a specific test suite by giving its name as an
argument to this test script.  For example, the command</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>python test_cxxtest<span style="color: #990000">.</span>py TestGpp</tt></pre></div></div>
<div class="paragraph"><p>executes the <tt>TestGpp</tt> test suite, which tests CxxTest with the
<tt>g++</tt> compiler.  Similarly, the command</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>python test_cxxtest<span style="color: #990000">.</span>py TestGppFOG</tt></pre></div></div>
<div class="paragraph"><p>executes the test suite that tests CxxTest using the <tt>g++</tt> compiler
and the FOG parser.</p></div>
<div class="paragraph"><p>The <tt>test_cxxtest.py</tt> script should work with versions Python 2.7
or newer.  If you are running Python 2.6, you will need to install
the <tt>unittest2</tt> package.  If you have
<a href="http://pypi.python.org/pypi/setuptools">setuptools</a> or
<a href="http://pypi.python.org/pypi/distribute">distribute</a>
installed, then
you can install this package from PyPI by executing</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.4
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>easy_install unittest2</tt></pre></div></div>
<div class="paragraph"><p>Similarly, the tests for this document rely on the <tt>PyUtilib</tt> Python package.</p></div>
<div class="paragraph"><p>The FOG parser requires two Python packages:</p></div>
<div class="ulist"><ul>
<li>
<p>
<tt>ply</tt>
</p>
</li>
<li>
<p>
<tt>ordereddict</tt> (This is only needed when running Python 2.6)
</p>
</li>
</ul></div>
<div class="paragraph"><p>If these packages are not available, then <tt>test_cxxtest.py</tt> will skip the FOG tests.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="appendix_D">Appendix D: CxxTest Releases</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Version 4.0.3 (TODO)
</p>
<div class="ulist"><ul>
<li>
<p>
Adding support for Python 2.4, 2.5, 2.6, 2.7 and 3.2
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 4.0.2 (2012-01-02)
</p>
<div class="ulist"><ul>
<li>
<p>
Bug fix to enable installation of cxxtestgen without the <em>setuptools</em> package
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 4.0.1 (2012-01-01)
</p>
<div class="ulist"><ul>
<li>
<p>
Documentation updates
</p>
</li>
<li>
<p>
Bug fix for installation of cxxtestgen script
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 4.0 (2011-12-28)
</p>
<div class="ulist"><ul>
<li>
<p>
Perl is no longer used to support CxxTest scripts.  Python is now the only scripting language used by      CxxTest.
</p>
</li>
<li>
<p>
The testing scripts have been rewritten using the PyUnit framework.
</p>
</li>
<li>
<p>
The installation process for CxxTest now leverages and integrates with the system Python installation.
</p>
</li>
<li>
<p>
A more comprehensive C++ parser is now available, which supports testing of templates.
</p>
</li>
<li>
<p>
The CxxTest GUI is no longer supported, and the <a href="#ts_warn">TS_WARN</a> is deprecated.
</p>
</li>
<li>
<p>
CxxTest runners now have a command-line interface that facilitates interative use of the test runner.
</p>
</li>
<li>
<p>
A new user guide is now available in PDF, HTML and Ebook formats.
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.10.1 (2004-12-01)
</p>
<div class="ulist"><ul>
<li>
<p>
Improved support for VC7
</p>
</li>
<li>
<p>
Fixed clash with some versions of STL
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.10.0 (2004-11-20)
</p>
<div class="ulist"><ul>
<li>
<p>
Added mock framework for global functions
</p>
</li>
<li>
<p>
Added TS_ASSERT_THROWS_ASSERT and TS_ASSERT_THROWS_EQUALS
</p>
</li>
<li>
<p>
Added CXXTEST_ENUM_TRAITS
</p>
</li>
<li>
<p>
Improved support for STL classes (vector, map etc.)
</p>
</li>
<li>
<p>
Added support for Digital Mars compiler
</p>
</li>
<li>
<p>
Reduced root/part compilation time and binary size
</p>
</li>
<li>
<p>
Support C++-style commenting of tests
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.9.1 (2004-01-19)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed small bug with runner exit code
</p>
</li>
<li>
<p>
Embedded test suites are now deprecated
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.9.0 (2004-01-17)
</p>
<div class="ulist"><ul>
<li>
<p>
Added TS_TRACE
</p>
</li>
<li>
<p>
Added --no-static-init
</p>
</li>
<li>
<p>
CxxTest::setAbortTestOnFail() works even without --abort-on-fail
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.8.5 (2004-01-08)
</p>
<div class="ulist"><ul>
<li>
<p>
Added --no-eh
</p>
</li>
<li>
<p>
Added CxxTest::setAbortTestOnFail() and CXXTEST_DEFAULT_ABORT
</p>
</li>
<li>
<p>
Added CxxTest::setMaxDumpSize()
</p>
</li>
<li>
<p>
Added StdioFilePrinter
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.8.4 (2003-12-31)
</p>
<div class="ulist"><ul>
<li>
<p>
Split distribution into cxxtest and cxxtest-selftest
</p>
</li>
<li>
<p>
Added &#8216;sample/msvc/FixFiles.bat&#8217;
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.8.3 (2003-12-24)
</p>
<div class="ulist"><ul>
<li>
<p>
Added TS_ASSERT_PREDICATE
</p>
</li>
<li>
<p>
Template files can now specify where to insert the preamble
</p>
</li>
<li>
<p>
Added a sample Visual Studio workspace in &#8216;sample/msvc&#8217;
</p>
</li>
<li>
<p>
Can compile in MSVC with warning level 4
</p>
</li>
<li>
<p>
Changed output format slightly
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.8.1 (2003-12-21)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed small bug when using multiple --part files.
</p>
</li>
<li>
<p>
Fixed X11 GUI crash when there&#8217;s no X server.
</p>
</li>
<li>
<p>
Added GlobalFixture::setUpWorld()/tearDownWorld()
</p>
</li>
<li>
<p>
Added leaveOnly(), activateAllTests() and &#8216;sample/only.tpl&#8217;
</p>
</li>
<li>
<p>
Should now run without warnings on Sun compiler.
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.8.0 (2003-12-13)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed bug where &#8216;Root.cpp&#8217; needed exception handling
</p>
</li>
<li>
<p>
Added TS_ASSERT_RELATION
</p>
</li>
<li>
<p>
TSM_ macros now also tell you what went wrong
</p>
</li>
<li>
<p>
Renamed Win32Gui::free() to avoid clashes
</p>
</li>
<li>
<p>
Now compatible with more versions of Borland compiler
</p>
</li>
<li>
<p>
Improved the documentation
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.7.1 (2003-09-29)
</p>
<div class="ulist"><ul>
<li>
<p>
Added --version
</p>
</li>
<li>
<p>
Compiles with even more exotic g++ warnings
</p>
</li>
<li>
<p>
Win32 Gui compiles with UNICODE
</p>
</li>
<li>
<p>
Should compile on some more platforms (Sun Forte, HP aCC)
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.7.0 (2003-09-20)
</p>
<div class="ulist"><ul>
<li>
<p>
Added TS_ASSERT_LESS_THAN_EQUALS
</p>
</li>
<li>
<p>
Minor cleanups
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.6.1 (2003-09-15)
</p>
<div class="ulist"><ul>
<li>
<p>
Improved QT GUI
</p>
</li>
<li>
<p>
Improved portability some more
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.6.0 (2003-09-04)
</p>
<div class="ulist"><ul>
<li>
<p>
Added --longlong
</p>
</li>
<li>
<p>
Some portability improvements
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.5.1 (2003-09-03)
</p>
<div class="ulist"><ul>
<li>
<p>
Major internal rewrite of macros
</p>
</li>
<li>
<p>
Added TS_ASSERT_SAME_DATA
</p>
</li>
<li>
<p>
Added --include option
</p>
</li>
<li>
<p>
Added --part and --root to enable splitting the test runner
</p>
</li>
<li>
<p>
Added global fixtures
</p>
</li>
<li>
<p>
Enhanced Win32 GUI with timers, -keep and -title
</p>
</li>
<li>
<p>
Now compiles with strict warnings
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.1.1 (2003-08-27)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed small bug in TS_ASSERT_THROWS_*()
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.1.0 (2003-08-23)
</p>
<div class="ulist"><ul>
<li>
<p>
Default ValueTraits now dumps value as hex bytes
</p>
</li>
<li>
<p>
Fixed double invocation bug (e.g. TS_FAIL(functionWithSideEffects()))
</p>
</li>
<li>
<p>
TS_ASSERT_THROWS*() are now "abort on fail"-friendly
</p>
</li>
<li>
<p>
Win32 GUI now supports Windows 98 and doesn&#8217;t need comctl32.lib
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 3.0.1 (2003-08-07)
</p>
<div class="ulist"><ul>
<li>
<p>
Added simple GUI for X11, Win32 and Qt
</p>
</li>
<li>
<p>
Added TS_WARN() macro
</p>
</li>
<li>
<p>
Removed --exit-code
</p>
</li>
<li>
<p>
Improved samples
</p>
</li>
<li>
<p>
Improved support for older (pre-std::) compilers
</p>
</li>
<li>
<p>
Made a PDF version of the User&#8217;s Guide
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 2.8.4 (2003-07-21)
</p>
<div class="ulist"><ul>
<li>
<p>
Now supports g++-3.3
</p>
</li>
<li>
<p>
Added --have-eh
</p>
</li>
<li>
<p>
Fixed bug in numberToString()
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 2.8.3 (2003-06-30)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed bugs in cxxtestgen.pl
</p>
</li>
<li>
<p>
Fixed warning for some compilers in ErrorPrinter/StdioPrinter
</p>
</li>
<li>
<p>
Thanks Martin Jost for pointing out these problems!
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 2.8.2 (2003-06-10)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed bug when using CXXTEST_ABORT_TEST_ON_FAIL without standard library
</p>
</li>
<li>
<p>
Added CXXTEST_USER_TRAITS
</p>
</li>
<li>
<p>
Added --abort-on-fail
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 2.8.1 (2003-01-16)
</p>
<div class="ulist"><ul>
<li>
<p>
Fixed charToString() for negative chars
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 2.8.0 (2003-01-13)
</p>
<div class="ulist"><ul>
<li>
<p>
Added CXXTEST_ABORT_TEST_ON_FAIL for xUnit-like behaviour
</p>
</li>
<li>
<p>
Added &#8216;sample/winddk&#8217;
</p>
</li>
<li>
<p>
Improved ValueTraits
</p>
</li>
<li>
<p>
Improved output formatter
</p>
</li>
<li>
<p>
Started version history
</p>
</li>
</ul></div>
</li>
<li>
<p>
Version 2.7.0 (2002-09-29)
</p>
<div class="ulist"><ul>
<li>
<p>
Added embedded test suites
</p>
</li>
<li>
<p>
Major internal improvements
</p>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-01-05 23:08:40 MST
</div>
</div>
</body>
</html>
